{"ast":null,"code":"import \"core-js/modules/es.array.unshift.js\";\nimport \"core-js/modules/es.array.push.js\";\n/*! Buttons for DataTables 2.3.6\r\n * Â©2016-2023 SpryMedia Ltd - datatables.net/license\r\n */\n\nimport $ from 'jquery';\nimport DataTable from 'datatables.net';\n\n// Used for namespacing events added to the document by each instance, so they\n// can be removed on destroy\nvar _instCounter = 0;\n\n// Button namespacing counter for namespacing events on individual buttons\nvar _buttonCounter = 0;\nvar _dtButtons = DataTable.ext.buttons;\n\n// Allow for jQuery slim\nfunction _fadeIn(el, duration, fn) {\n  if ($.fn.animate) {\n    el.stop().fadeIn(duration, fn);\n  } else {\n    el.css('display', 'block');\n    if (fn) {\n      fn.call(el);\n    }\n  }\n}\nfunction _fadeOut(el, duration, fn) {\n  if ($.fn.animate) {\n    el.stop().fadeOut(duration, fn);\n  } else {\n    el.css('display', 'none');\n    if (fn) {\n      fn.call(el);\n    }\n  }\n}\n\n/**\r\n * [Buttons description]\r\n * @param {[type]}\r\n * @param {[type]}\r\n */\nvar Buttons = function (dt, config) {\n  // If not created with a `new` keyword then we return a wrapper function that\n  // will take the settings object for a DT. This allows easy use of new instances\n  // with the `layout` option - e.g. `topLeft: $.fn.dataTable.Buttons( ... )`.\n  if (!(this instanceof Buttons)) {\n    return function (settings) {\n      return new Buttons(settings, dt).container();\n    };\n  }\n\n  // If there is no config set it to an empty object\n  if (typeof config === 'undefined') {\n    config = {};\n  }\n\n  // Allow a boolean true for defaults\n  if (config === true) {\n    config = {};\n  }\n\n  // For easy configuration of buttons an array can be given\n  if (Array.isArray(config)) {\n    config = {\n      buttons: config\n    };\n  }\n  this.c = $.extend(true, {}, Buttons.defaults, config);\n\n  // Don't want a deep copy for the buttons\n  if (config.buttons) {\n    this.c.buttons = config.buttons;\n  }\n  this.s = {\n    dt: new DataTable.Api(dt),\n    buttons: [],\n    listenKeys: '',\n    namespace: 'dtb' + _instCounter++\n  };\n  this.dom = {\n    container: $('<' + this.c.dom.container.tag + '/>').addClass(this.c.dom.container.className)\n  };\n  this._constructor();\n};\n$.extend(Buttons.prototype, {\n  /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\r\n   * Public methods\r\n   */\n\n  /**\r\n   * Get the action of a button\r\n   * @param  {int|string} Button index\r\n   * @return {function}\r\n   */ /**\r\n      * Set the action of a button\r\n      * @param  {node} node Button element\r\n      * @param  {function} action Function to set\r\n      * @return {Buttons} Self for chaining\r\n      */\n  action: function (node, action) {\n    var button = this._nodeToButton(node);\n    if (action === undefined) {\n      return button.conf.action;\n    }\n    button.conf.action = action;\n    return this;\n  },\n  /**\r\n   * Add an active class to the button to make to look active or get current\r\n   * active state.\r\n   * @param  {node} node Button element\r\n   * @param  {boolean} [flag] Enable / disable flag\r\n   * @return {Buttons} Self for chaining or boolean for getter\r\n   */\n  active: function (node, flag) {\n    var button = this._nodeToButton(node);\n    var klass = this.c.dom.button.active;\n    var jqNode = $(button.node);\n    if (flag === undefined) {\n      return jqNode.hasClass(klass);\n    }\n    jqNode.toggleClass(klass, flag === undefined ? true : flag);\n    return this;\n  },\n  /**\r\n   * Add a new button\r\n   * @param {object} config Button configuration object, base string name or function\r\n   * @param {int|string} [idx] Button index for where to insert the button\r\n   * @param {boolean} [draw=true] Trigger a draw. Set a false when adding\r\n   *   lots of buttons, until the last button.\r\n   * @return {Buttons} Self for chaining\r\n   */\n  add: function (config, idx, draw) {\n    var buttons = this.s.buttons;\n    if (typeof idx === 'string') {\n      var split = idx.split('-');\n      var base = this.s;\n      for (var i = 0, ien = split.length - 1; i < ien; i++) {\n        base = base.buttons[split[i] * 1];\n      }\n      buttons = base.buttons;\n      idx = split[split.length - 1] * 1;\n    }\n    this._expandButton(buttons, config, config !== undefined ? config.split : undefined, (config === undefined || config.split === undefined || config.split.length === 0) && base !== undefined, false, idx);\n    if (draw === undefined || draw === true) {\n      this._draw();\n    }\n    return this;\n  },\n  /**\r\n   * Clear buttons from a collection and then insert new buttons\r\n   */\n  collectionRebuild: function (node, newButtons) {\n    var button = this._nodeToButton(node);\n    if (newButtons !== undefined) {\n      var i;\n      // Need to reverse the array\n      for (i = button.buttons.length - 1; i >= 0; i--) {\n        this.remove(button.buttons[i].node);\n      }\n\n      // If the collection has prefix and / or postfix buttons we need to add them in\n      if (button.conf.prefixButtons) {\n        newButtons.unshift.apply(newButtons, button.conf.prefixButtons);\n      }\n      if (button.conf.postfixButtons) {\n        newButtons.push.apply(newButtons, button.conf.postfixButtons);\n      }\n      for (i = 0; i < newButtons.length; i++) {\n        var newBtn = newButtons[i];\n        this._expandButton(button.buttons, newBtn, newBtn !== undefined && newBtn.config !== undefined && newBtn.config.split !== undefined, true, newBtn.parentConf !== undefined && newBtn.parentConf.split !== undefined, null, newBtn.parentConf);\n      }\n    }\n    this._draw(button.collection, button.buttons);\n  },\n  /**\r\n   * Get the container node for the buttons\r\n   * @return {jQuery} Buttons node\r\n   */\n  container: function () {\n    return this.dom.container;\n  },\n  /**\r\n   * Disable a button\r\n   * @param  {node} node Button node\r\n   * @return {Buttons} Self for chaining\r\n   */\n  disable: function (node) {\n    var button = this._nodeToButton(node);\n    $(button.node).addClass(this.c.dom.button.disabled).prop('disabled', true);\n    return this;\n  },\n  /**\r\n   * Destroy the instance, cleaning up event handlers and removing DOM\r\n   * elements\r\n   * @return {Buttons} Self for chaining\r\n   */\n  destroy: function () {\n    // Key event listener\n    $('body').off('keyup.' + this.s.namespace);\n\n    // Individual button destroy (so they can remove their own events if\n    // needed). Take a copy as the array is modified by `remove`\n    var buttons = this.s.buttons.slice();\n    var i, ien;\n    for (i = 0, ien = buttons.length; i < ien; i++) {\n      this.remove(buttons[i].node);\n    }\n\n    // Container\n    this.dom.container.remove();\n\n    // Remove from the settings object collection\n    var buttonInsts = this.s.dt.settings()[0];\n    for (i = 0, ien = buttonInsts.length; i < ien; i++) {\n      if (buttonInsts.inst === this) {\n        buttonInsts.splice(i, 1);\n        break;\n      }\n    }\n    return this;\n  },\n  /**\r\n   * Enable / disable a button\r\n   * @param  {node} node Button node\r\n   * @param  {boolean} [flag=true] Enable / disable flag\r\n   * @return {Buttons} Self for chaining\r\n   */\n  enable: function (node, flag) {\n    if (flag === false) {\n      return this.disable(node);\n    }\n    var button = this._nodeToButton(node);\n    $(button.node).removeClass(this.c.dom.button.disabled).prop('disabled', false);\n    return this;\n  },\n  /**\r\n   * Get a button's index\r\n   * \r\n   * This is internally recursive\r\n   * @param {element} node Button to get the index of\r\n   * @return {string} Button index\r\n   */\n  index: function (node, nested, buttons) {\n    if (!nested) {\n      nested = '';\n      buttons = this.s.buttons;\n    }\n    for (var i = 0, ien = buttons.length; i < ien; i++) {\n      var inner = buttons[i].buttons;\n      if (buttons[i].node === node) {\n        return nested + i;\n      }\n      if (inner && inner.length) {\n        var match = this.index(node, i + '-', inner);\n        if (match !== null) {\n          return match;\n        }\n      }\n    }\n    return null;\n  },\n  /**\r\n   * Get the instance name for the button set selector\r\n   * @return {string} Instance name\r\n   */\n  name: function () {\n    return this.c.name;\n  },\n  /**\r\n   * Get a button's node of the buttons container if no button is given\r\n   * @param  {node} [node] Button node\r\n   * @return {jQuery} Button element, or container\r\n   */\n  node: function (node) {\n    if (!node) {\n      return this.dom.container;\n    }\n    var button = this._nodeToButton(node);\n    return $(button.node);\n  },\n  /**\r\n   * Set / get a processing class on the selected button\r\n   * @param {element} node Triggering button node\r\n   * @param  {boolean} flag true to add, false to remove, undefined to get\r\n   * @return {boolean|Buttons} Getter value or this if a setter.\r\n   */\n  processing: function (node, flag) {\n    var dt = this.s.dt;\n    var button = this._nodeToButton(node);\n    if (flag === undefined) {\n      return $(button.node).hasClass('processing');\n    }\n    $(button.node).toggleClass('processing', flag);\n    $(dt.table().node()).triggerHandler('buttons-processing.dt', [flag, dt.button(node), dt, $(node), button.conf]);\n    return this;\n  },\n  /**\r\n   * Remove a button.\r\n   * @param  {node} node Button node\r\n   * @return {Buttons} Self for chaining\r\n   */\n  remove: function (node) {\n    var button = this._nodeToButton(node);\n    var host = this._nodeToHost(node);\n    var dt = this.s.dt;\n\n    // Remove any child buttons first\n    if (button.buttons.length) {\n      for (var i = button.buttons.length - 1; i >= 0; i--) {\n        this.remove(button.buttons[i].node);\n      }\n    }\n    button.conf.destroying = true;\n\n    // Allow the button to remove event handlers, etc\n    if (button.conf.destroy) {\n      button.conf.destroy.call(dt.button(node), dt, $(node), button.conf);\n    }\n    this._removeKey(button.conf);\n    $(button.node).remove();\n    var idx = $.inArray(button, host);\n    host.splice(idx, 1);\n    return this;\n  },\n  /**\r\n   * Get the text for a button\r\n   * @param  {int|string} node Button index\r\n   * @return {string} Button text\r\n   */ /**\r\n      * Set the text for a button\r\n      * @param  {int|string|function} node Button index\r\n      * @param  {string} label Text\r\n      * @return {Buttons} Self for chaining\r\n      */\n  text: function (node, label) {\n    var button = this._nodeToButton(node);\n    var buttonLiner = this.c.dom.collection.buttonLiner;\n    var linerTag = button.inCollection && buttonLiner && buttonLiner.tag ? buttonLiner.tag : this.c.dom.buttonLiner.tag;\n    var dt = this.s.dt;\n    var jqNode = $(button.node);\n    var text = function (opt) {\n      return typeof opt === 'function' ? opt(dt, jqNode, button.conf) : opt;\n    };\n    if (label === undefined) {\n      return text(button.conf.text);\n    }\n    button.conf.text = label;\n    if (linerTag) {\n      jqNode.children(linerTag).eq(0).filter(':not(.dt-down-arrow)').html(text(label));\n    } else {\n      jqNode.html(text(label));\n    }\n    return this;\n  },\n  /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\r\n   * Constructor\r\n   */\n\n  /**\r\n   * Buttons constructor\r\n   * @private\r\n   */\n  _constructor: function () {\n    var that = this;\n    var dt = this.s.dt;\n    var dtSettings = dt.settings()[0];\n    var buttons = this.c.buttons;\n    if (!dtSettings._buttons) {\n      dtSettings._buttons = [];\n    }\n    dtSettings._buttons.push({\n      inst: this,\n      name: this.c.name\n    });\n    for (var i = 0, ien = buttons.length; i < ien; i++) {\n      this.add(buttons[i]);\n    }\n    dt.on('destroy', function (e, settings) {\n      if (settings === dtSettings) {\n        that.destroy();\n      }\n    });\n\n    // Global key event binding to listen for button keys\n    $('body').on('keyup.' + this.s.namespace, function (e) {\n      if (!document.activeElement || document.activeElement === document.body) {\n        // SUse a string of characters for fast lookup of if we need to\n        // handle this\n        var character = String.fromCharCode(e.keyCode).toLowerCase();\n        if (that.s.listenKeys.toLowerCase().indexOf(character) !== -1) {\n          that._keypress(character, e);\n        }\n      }\n    });\n  },\n  /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\r\n   * Private methods\r\n   */\n\n  /**\r\n   * Add a new button to the key press listener\r\n   * @param {object} conf Resolved button configuration object\r\n   * @private\r\n   */\n  _addKey: function (conf) {\n    if (conf.key) {\n      this.s.listenKeys += $.isPlainObject(conf.key) ? conf.key.key : conf.key;\n    }\n  },\n  /**\r\n   * Insert the buttons into the container. Call without parameters!\r\n   * @param  {node} [container] Recursive only - Insert point\r\n   * @param  {array} [buttons] Recursive only - Buttons array\r\n   * @private\r\n   */\n  _draw: function (container, buttons) {\n    if (!container) {\n      container = this.dom.container;\n      buttons = this.s.buttons;\n    }\n    container.children().detach();\n    for (var i = 0, ien = buttons.length; i < ien; i++) {\n      container.append(buttons[i].inserter);\n      container.append(' ');\n      if (buttons[i].buttons && buttons[i].buttons.length) {\n        this._draw(buttons[i].collection, buttons[i].buttons);\n      }\n    }\n  },\n  /**\r\n   * Create buttons from an array of buttons\r\n   * @param  {array} attachTo Buttons array to attach to\r\n   * @param  {object} button Button definition\r\n   * @param  {boolean} inCollection true if the button is in a collection\r\n   * @private\r\n   */\n  _expandButton: function (attachTo, button, split, inCollection, inSplit, attachPoint, parentConf) {\n    var dt = this.s.dt;\n    var buttonCounter = 0;\n    var isSplit = false;\n    var buttons = !Array.isArray(button) ? [button] : button;\n    if (button === undefined) {\n      buttons = !Array.isArray(split) ? [split] : split;\n    }\n    if (button !== undefined && button.split !== undefined) {\n      isSplit = true;\n    }\n    for (var i = 0, ien = buttons.length; i < ien; i++) {\n      var conf = this._resolveExtends(buttons[i]);\n      if (!conf) {\n        continue;\n      }\n      if (conf.config !== undefined && conf.config.split) {\n        isSplit = true;\n      } else {\n        isSplit = false;\n      }\n\n      // If the configuration is an array, then expand the buttons at this\n      // point\n      if (Array.isArray(conf)) {\n        this._expandButton(attachTo, conf, built !== undefined && built.conf !== undefined ? built.conf.split : undefined, inCollection, parentConf !== undefined && parentConf.split !== undefined, attachPoint, parentConf);\n        continue;\n      }\n      var built = this._buildButton(conf, inCollection, conf.split !== undefined || conf.config !== undefined && conf.config.split !== undefined, inSplit);\n      if (!built) {\n        continue;\n      }\n      if (attachPoint !== undefined && attachPoint !== null) {\n        attachTo.splice(attachPoint, 0, built);\n        attachPoint++;\n      } else {\n        attachTo.push(built);\n      }\n      if (built.conf.buttons || built.conf.split) {\n        built.collection = $('<' + (isSplit ? this.c.dom.splitCollection.tag : this.c.dom.collection.tag) + '/>');\n        built.conf._collection = built.collection;\n        if (built.conf.split) {\n          for (var j = 0; j < built.conf.split.length; j++) {\n            if (typeof built.conf.split[j] === \"object\") {\n              built.conf.split[j].parent = parentConf;\n              if (built.conf.split[j].collectionLayout === undefined) {\n                built.conf.split[j].collectionLayout = built.conf.collectionLayout;\n              }\n              if (built.conf.split[j].dropup === undefined) {\n                built.conf.split[j].dropup = built.conf.dropup;\n              }\n              if (built.conf.split[j].fade === undefined) {\n                built.conf.split[j].fade = built.conf.fade;\n              }\n            }\n          }\n        } else {\n          $(built.node).append($('<span class=\"dt-down-arrow\">' + this.c.dom.splitDropdown.text + '</span>'));\n        }\n        this._expandButton(built.buttons, built.conf.buttons, built.conf.split, !isSplit, isSplit, attachPoint, built.conf);\n      }\n      built.conf.parent = parentConf;\n\n      // init call is made here, rather than buildButton as it needs to\n      // be selectable, and for that it needs to be in the buttons array\n      if (conf.init) {\n        conf.init.call(dt.button(built.node), dt, $(built.node), conf);\n      }\n      buttonCounter++;\n    }\n  },\n  /**\r\n   * Create an individual button\r\n   * @param  {object} config            Resolved button configuration\r\n   * @param  {boolean} inCollection `true` if a collection button\r\n   * @return {jQuery} Created button node (jQuery)\r\n   * @private\r\n   */\n  _buildButton: function (config, inCollection, isSplit, inSplit) {\n    var buttonDom = this.c.dom.button;\n    var linerDom = this.c.dom.buttonLiner;\n    var collectionDom = this.c.dom.collection;\n    var splitDom = this.c.dom.split;\n    var splitCollectionDom = this.c.dom.splitCollection;\n    var splitDropdownButton = this.c.dom.splitDropdownButton;\n    var dt = this.s.dt;\n    var text = function (opt) {\n      return typeof opt === 'function' ? opt(dt, button, config) : opt;\n    };\n\n    // Spacers don't do much other than insert an element into the DOM\n    if (config.spacer) {\n      var spacer = $('<span></span>').addClass('dt-button-spacer ' + config.style + ' ' + buttonDom.spacerClass).html(text(config.text));\n      return {\n        conf: config,\n        node: spacer,\n        inserter: spacer,\n        buttons: [],\n        inCollection: inCollection,\n        isSplit: isSplit,\n        inSplit: inSplit,\n        collection: null\n      };\n    }\n    if (!isSplit && inSplit && splitCollectionDom) {\n      buttonDom = splitDropdownButton;\n    } else if (!isSplit && inCollection && collectionDom.button) {\n      buttonDom = collectionDom.button;\n    }\n    if (!isSplit && inSplit && splitCollectionDom.buttonLiner) {\n      linerDom = splitCollectionDom.buttonLiner;\n    } else if (!isSplit && inCollection && collectionDom.buttonLiner) {\n      linerDom = collectionDom.buttonLiner;\n    }\n\n    // Make sure that the button is available based on whatever requirements\n    // it has. For example, PDF button require pdfmake\n    if (config.available && !config.available(dt, config) && !config.hasOwnProperty('html')) {\n      return false;\n    }\n    var button;\n    if (!config.hasOwnProperty('html')) {\n      var action = function (e, dt, button, config) {\n        config.action.call(dt.button(button), e, dt, button, config);\n        $(dt.table().node()).triggerHandler('buttons-action.dt', [dt.button(button), dt, button, config]);\n      };\n      var tag = config.tag || buttonDom.tag;\n      var clickBlurs = config.clickBlurs === undefined ? true : config.clickBlurs;\n      button = $('<' + tag + '/>').addClass(buttonDom.className).addClass(inSplit ? this.c.dom.splitDropdownButton.className : '').attr('tabindex', this.s.dt.settings()[0].iTabIndex).attr('aria-controls', this.s.dt.table().node().id).on('click.dtb', function (e) {\n        e.preventDefault();\n        if (!button.hasClass(buttonDom.disabled) && config.action) {\n          action(e, dt, button, config);\n        }\n        if (clickBlurs) {\n          button.trigger('blur');\n        }\n      }).on('keypress.dtb', function (e) {\n        if (e.keyCode === 13) {\n          e.preventDefault();\n          if (!button.hasClass(buttonDom.disabled) && config.action) {\n            action(e, dt, button, config);\n          }\n        }\n      });\n\n      // Make `a` tags act like a link\n      if (tag.toLowerCase() === 'a') {\n        button.attr('href', '#');\n      }\n\n      // Button tags should have `type=button` so they don't have any default behaviour\n      if (tag.toLowerCase() === 'button') {\n        button.attr('type', 'button');\n      }\n      if (linerDom.tag) {\n        var liner = $('<' + linerDom.tag + '/>').html(text(config.text)).addClass(linerDom.className);\n        if (linerDom.tag.toLowerCase() === 'a') {\n          liner.attr('href', '#');\n        }\n        button.append(liner);\n      } else {\n        button.html(text(config.text));\n      }\n      if (config.enabled === false) {\n        button.addClass(buttonDom.disabled);\n      }\n      if (config.className) {\n        button.addClass(config.className);\n      }\n      if (config.titleAttr) {\n        button.attr('title', text(config.titleAttr));\n      }\n      if (config.attr) {\n        button.attr(config.attr);\n      }\n      if (!config.namespace) {\n        config.namespace = '.dt-button-' + _buttonCounter++;\n      }\n      if (config.config !== undefined && config.config.split) {\n        config.split = config.config.split;\n      }\n    } else {\n      button = $(config.html);\n    }\n    var buttonContainer = this.c.dom.buttonContainer;\n    var inserter;\n    if (buttonContainer && buttonContainer.tag) {\n      inserter = $('<' + buttonContainer.tag + '/>').addClass(buttonContainer.className).append(button);\n    } else {\n      inserter = button;\n    }\n    this._addKey(config);\n\n    // Style integration callback for DOM manipulation\n    // Note that this is _not_ documented. It is currently\n    // for style integration only\n    if (this.c.buttonCreated) {\n      inserter = this.c.buttonCreated(config, inserter);\n    }\n    var splitDiv;\n    if (isSplit) {\n      splitDiv = $('<div/>').addClass(this.c.dom.splitWrapper.className);\n      splitDiv.append(button);\n      var dropButtonConfig = $.extend(config, {\n        text: this.c.dom.splitDropdown.text,\n        className: this.c.dom.splitDropdown.className,\n        closeButton: false,\n        attr: {\n          'aria-haspopup': 'dialog',\n          'aria-expanded': false\n        },\n        align: this.c.dom.splitDropdown.align,\n        splitAlignClass: this.c.dom.splitDropdown.splitAlignClass\n      });\n      this._addKey(dropButtonConfig);\n      var splitAction = function (e, dt, button, config) {\n        _dtButtons.split.action.call(dt.button(splitDiv), e, dt, button, config);\n        $(dt.table().node()).triggerHandler('buttons-action.dt', [dt.button(button), dt, button, config]);\n        button.attr('aria-expanded', true);\n      };\n      var dropButton = $('<button class=\"' + this.c.dom.splitDropdown.className + ' dt-button\"><span class=\"dt-btn-split-drop-arrow\">' + this.c.dom.splitDropdown.text + '</span></button>').on('click.dtb', function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (!dropButton.hasClass(buttonDom.disabled)) {\n          splitAction(e, dt, dropButton, dropButtonConfig);\n        }\n        if (clickBlurs) {\n          dropButton.trigger('blur');\n        }\n      }).on('keypress.dtb', function (e) {\n        if (e.keyCode === 13) {\n          e.preventDefault();\n          if (!dropButton.hasClass(buttonDom.disabled)) {\n            splitAction(e, dt, dropButton, dropButtonConfig);\n          }\n        }\n      });\n      if (config.split.length === 0) {\n        dropButton.addClass('dtb-hide-drop');\n      }\n      splitDiv.append(dropButton).attr(dropButtonConfig.attr);\n    }\n    return {\n      conf: config,\n      node: isSplit ? splitDiv.get(0) : button.get(0),\n      inserter: isSplit ? splitDiv : inserter,\n      buttons: [],\n      inCollection: inCollection,\n      isSplit: isSplit,\n      inSplit: inSplit,\n      collection: null\n    };\n  },\n  /**\r\n   * Get the button object from a node (recursive)\r\n   * @param  {node} node Button node\r\n   * @param  {array} [buttons] Button array, uses base if not defined\r\n   * @return {object} Button object\r\n   * @private\r\n   */\n  _nodeToButton: function (node, buttons) {\n    if (!buttons) {\n      buttons = this.s.buttons;\n    }\n    for (var i = 0, ien = buttons.length; i < ien; i++) {\n      if (buttons[i].node === node) {\n        return buttons[i];\n      }\n      if (buttons[i].buttons.length) {\n        var ret = this._nodeToButton(node, buttons[i].buttons);\n        if (ret) {\n          return ret;\n        }\n      }\n    }\n  },\n  /**\r\n   * Get container array for a button from a button node (recursive)\r\n   * @param  {node} node Button node\r\n   * @param  {array} [buttons] Button array, uses base if not defined\r\n   * @return {array} Button's host array\r\n   * @private\r\n   */\n  _nodeToHost: function (node, buttons) {\n    if (!buttons) {\n      buttons = this.s.buttons;\n    }\n    for (var i = 0, ien = buttons.length; i < ien; i++) {\n      if (buttons[i].node === node) {\n        return buttons;\n      }\n      if (buttons[i].buttons.length) {\n        var ret = this._nodeToHost(node, buttons[i].buttons);\n        if (ret) {\n          return ret;\n        }\n      }\n    }\n  },\n  /**\r\n   * Handle a key press - determine if any button's key configured matches\r\n   * what was typed and trigger the action if so.\r\n   * @param  {string} character The character pressed\r\n   * @param  {object} e Key event that triggered this call\r\n   * @private\r\n   */\n  _keypress: function (character, e) {\n    // Check if this button press already activated on another instance of Buttons\n    if (e._buttonsHandled) {\n      return;\n    }\n    var run = function (conf, node) {\n      if (!conf.key) {\n        return;\n      }\n      if (conf.key === character) {\n        e._buttonsHandled = true;\n        $(node).click();\n      } else if ($.isPlainObject(conf.key)) {\n        if (conf.key.key !== character) {\n          return;\n        }\n        if (conf.key.shiftKey && !e.shiftKey) {\n          return;\n        }\n        if (conf.key.altKey && !e.altKey) {\n          return;\n        }\n        if (conf.key.ctrlKey && !e.ctrlKey) {\n          return;\n        }\n        if (conf.key.metaKey && !e.metaKey) {\n          return;\n        }\n\n        // Made it this far - it is good\n        e._buttonsHandled = true;\n        $(node).click();\n      }\n    };\n    var recurse = function (a) {\n      for (var i = 0, ien = a.length; i < ien; i++) {\n        run(a[i].conf, a[i].node);\n        if (a[i].buttons.length) {\n          recurse(a[i].buttons);\n        }\n      }\n    };\n    recurse(this.s.buttons);\n  },\n  /**\r\n   * Remove a key from the key listener for this instance (to be used when a\r\n   * button is removed)\r\n   * @param  {object} conf Button configuration\r\n   * @private\r\n   */\n  _removeKey: function (conf) {\n    if (conf.key) {\n      var character = $.isPlainObject(conf.key) ? conf.key.key : conf.key;\n\n      // Remove only one character, as multiple buttons could have the\n      // same listening key\n      var a = this.s.listenKeys.split('');\n      var idx = $.inArray(character, a);\n      a.splice(idx, 1);\n      this.s.listenKeys = a.join('');\n    }\n  },\n  /**\r\n   * Resolve a button configuration\r\n   * @param  {string|function|object} conf Button config to resolve\r\n   * @return {object} Button configuration\r\n   * @private\r\n   */\n  _resolveExtends: function (conf) {\n    var that = this;\n    var dt = this.s.dt;\n    var i, ien;\n    var toConfObject = function (base) {\n      var loop = 0;\n\n      // Loop until we have resolved to a button configuration, or an\n      // array of button configurations (which will be iterated\n      // separately)\n      while (!$.isPlainObject(base) && !Array.isArray(base)) {\n        if (base === undefined) {\n          return;\n        }\n        if (typeof base === 'function') {\n          base = base.call(that, dt, conf);\n          if (!base) {\n            return false;\n          }\n        } else if (typeof base === 'string') {\n          if (!_dtButtons[base]) {\n            return {\n              html: base\n            };\n          }\n          base = _dtButtons[base];\n        }\n        loop++;\n        if (loop > 30) {\n          // Protect against misconfiguration killing the browser\n          throw 'Buttons: Too many iterations';\n        }\n      }\n      return Array.isArray(base) ? base : $.extend({}, base);\n    };\n    conf = toConfObject(conf);\n    while (conf && conf.extend) {\n      // Use `toConfObject` in case the button definition being extended\n      // is itself a string or a function\n      if (!_dtButtons[conf.extend]) {\n        throw 'Cannot extend unknown button type: ' + conf.extend;\n      }\n      var objArray = toConfObject(_dtButtons[conf.extend]);\n      if (Array.isArray(objArray)) {\n        return objArray;\n      } else if (!objArray) {\n        // This is a little brutal as it might be possible to have a\n        // valid button without the extend, but if there is no extend\n        // then the host button would be acting in an undefined state\n        return false;\n      }\n\n      // Stash the current class name\n      var originalClassName = objArray.className;\n      if (conf.config !== undefined && objArray.config !== undefined) {\n        conf.config = $.extend({}, objArray.config, conf.config);\n      }\n      conf = $.extend({}, objArray, conf);\n\n      // The extend will have overwritten the original class name if the\n      // `conf` object also assigned a class, but we want to concatenate\n      // them so they are list that is combined from all extended buttons\n      if (originalClassName && conf.className !== originalClassName) {\n        conf.className = originalClassName + ' ' + conf.className;\n      }\n\n      // Although we want the `conf` object to overwrite almost all of\n      // the properties of the object being extended, the `extend`\n      // property should come from the object being extended\n      conf.extend = objArray.extend;\n    }\n\n    // Buttons to be added to a collection  -gives the ability to define\n    // if buttons should be added to the start or end of a collection\n    var postfixButtons = conf.postfixButtons;\n    if (postfixButtons) {\n      if (!conf.buttons) {\n        conf.buttons = [];\n      }\n      for (i = 0, ien = postfixButtons.length; i < ien; i++) {\n        conf.buttons.push(postfixButtons[i]);\n      }\n    }\n    var prefixButtons = conf.prefixButtons;\n    if (prefixButtons) {\n      if (!conf.buttons) {\n        conf.buttons = [];\n      }\n      for (i = 0, ien = prefixButtons.length; i < ien; i++) {\n        conf.buttons.splice(i, 0, prefixButtons[i]);\n      }\n    }\n    return conf;\n  },\n  /**\r\n   * Display (and replace if there is an existing one) a popover attached to a button\r\n   * @param {string|node} content Content to show\r\n   * @param {DataTable.Api} hostButton DT API instance of the button\r\n   * @param {object} inOpts Options (see object below for all options)\r\n   */\n  _popover: function (content, hostButton, inOpts, e) {\n    var dt = hostButton;\n    var buttonsSettings = this.c;\n    var closed = false;\n    var options = $.extend({\n      align: 'button-left',\n      // button-right, dt-container, split-left, split-right\n      autoClose: false,\n      background: true,\n      backgroundClassName: 'dt-button-background',\n      closeButton: true,\n      contentClassName: buttonsSettings.dom.collection.className,\n      collectionLayout: '',\n      collectionTitle: '',\n      dropup: false,\n      fade: 400,\n      popoverTitle: '',\n      rightAlignClassName: 'dt-button-right',\n      tag: buttonsSettings.dom.collection.tag\n    }, inOpts);\n    var hostNode = hostButton.node();\n    var close = function () {\n      closed = true;\n      _fadeOut($('.dt-button-collection'), options.fade, function () {\n        $(this).detach();\n      });\n      $(dt.buttons('[aria-haspopup=\"dialog\"][aria-expanded=\"true\"]').nodes()).attr('aria-expanded', 'false');\n      $('div.dt-button-background').off('click.dtb-collection');\n      Buttons.background(false, options.backgroundClassName, options.fade, hostNode);\n      $(window).off('resize.resize.dtb-collection');\n      $('body').off('.dtb-collection');\n      dt.off('buttons-action.b-internal');\n      dt.off('destroy');\n    };\n    if (content === false) {\n      close();\n      return;\n    }\n    var existingExpanded = $(dt.buttons('[aria-haspopup=\"dialog\"][aria-expanded=\"true\"]').nodes());\n    if (existingExpanded.length) {\n      // Reuse the current position if the button that was triggered is inside an existing collection\n      if (hostNode.closest('div.dt-button-collection').length) {\n        hostNode = existingExpanded.eq(0);\n      }\n      close();\n    }\n\n    // Try to be smart about the layout\n    var cnt = $('.dt-button', content).length;\n    var mod = '';\n    if (cnt === 3) {\n      mod = 'dtb-b3';\n    } else if (cnt === 2) {\n      mod = 'dtb-b2';\n    } else if (cnt === 1) {\n      mod = 'dtb-b1';\n    }\n    var display = $('<div/>').addClass('dt-button-collection').addClass(options.collectionLayout).addClass(options.splitAlignClass).addClass(mod).css('display', 'none').attr({\n      'aria-modal': true,\n      role: 'dialog'\n    });\n    content = $(content).addClass(options.contentClassName).attr('role', 'menu').appendTo(display);\n    hostNode.attr('aria-expanded', 'true');\n    if (hostNode.parents('body')[0] !== document.body) {\n      hostNode = document.body.lastChild;\n    }\n    if (options.popoverTitle) {\n      display.prepend('<div class=\"dt-button-collection-title\">' + options.popoverTitle + '</div>');\n    } else if (options.collectionTitle) {\n      display.prepend('<div class=\"dt-button-collection-title\">' + options.collectionTitle + '</div>');\n    }\n    if (options.closeButton) {\n      display.prepend('<div class=\"dtb-popover-close\">x</div>').addClass('dtb-collection-closeable');\n    }\n    _fadeIn(display.insertAfter(hostNode), options.fade);\n    var tableContainer = $(hostButton.table().container());\n    var position = display.css('position');\n    if (options.span === 'container' || options.align === 'dt-container') {\n      hostNode = hostNode.parent();\n      display.css('width', tableContainer.width());\n    }\n\n    // Align the popover relative to the DataTables container\n    // Useful for wide popovers such as SearchPanes\n    if (position === 'absolute') {\n      // Align relative to the host button\n      var offsetParent = $(hostNode[0].offsetParent);\n      var buttonPosition = hostNode.position();\n      var buttonOffset = hostNode.offset();\n      var tableSizes = offsetParent.offset();\n      var containerPosition = offsetParent.position();\n      var computed = window.getComputedStyle(offsetParent[0]);\n      tableSizes.height = offsetParent.outerHeight();\n      tableSizes.width = offsetParent.width() + parseFloat(computed.paddingLeft);\n      tableSizes.right = tableSizes.left + tableSizes.width;\n      tableSizes.bottom = tableSizes.top + tableSizes.height;\n\n      // Set the initial position so we can read height / width\n      var top = buttonPosition.top + hostNode.outerHeight();\n      var left = buttonPosition.left;\n      display.css({\n        top: top,\n        left: left\n      });\n\n      // Get the popover position\n      computed = window.getComputedStyle(display[0]);\n      var popoverSizes = display.offset();\n      popoverSizes.height = display.outerHeight();\n      popoverSizes.width = display.outerWidth();\n      popoverSizes.right = popoverSizes.left + popoverSizes.width;\n      popoverSizes.bottom = popoverSizes.top + popoverSizes.height;\n      popoverSizes.marginTop = parseFloat(computed.marginTop);\n      popoverSizes.marginBottom = parseFloat(computed.marginBottom);\n\n      // First position per the class requirements - pop up and right align\n      if (options.dropup) {\n        top = buttonPosition.top - popoverSizes.height - popoverSizes.marginTop - popoverSizes.marginBottom;\n      }\n      if (options.align === 'button-right' || display.hasClass(options.rightAlignClassName)) {\n        left = buttonPosition.left - popoverSizes.width + hostNode.outerWidth();\n      }\n\n      // Container alignment - make sure it doesn't overflow the table container\n      if (options.align === 'dt-container' || options.align === 'container') {\n        if (left < buttonPosition.left) {\n          left = -buttonPosition.left;\n        }\n        if (left + popoverSizes.width > tableSizes.width) {\n          left = tableSizes.width - popoverSizes.width;\n        }\n      }\n\n      // Window adjustment\n      if (containerPosition.left + left + popoverSizes.width > $(window).width()) {\n        // Overflowing the document to the right\n        left = $(window).width() - popoverSizes.width - containerPosition.left;\n      }\n      if (buttonOffset.left + left < 0) {\n        // Off to the left of the document\n        left = -buttonOffset.left;\n      }\n      if (containerPosition.top + top + popoverSizes.height > $(window).height() + $(window).scrollTop()) {\n        // Pop up if otherwise we'd need the user to scroll down\n        top = buttonPosition.top - popoverSizes.height - popoverSizes.marginTop - popoverSizes.marginBottom;\n      }\n      if (containerPosition.top + top < $(window).scrollTop()) {\n        // Correction for when the top is beyond the top of the page\n        top = buttonPosition.top + hostNode.outerHeight();\n      }\n\n      // Calculations all done - now set it\n      display.css({\n        top: top,\n        left: left\n      });\n    } else {\n      // Fix position - centre on screen\n      var position = function () {\n        var half = $(window).height() / 2;\n        var top = display.height() / 2;\n        if (top > half) {\n          top = half;\n        }\n        display.css('marginTop', top * -1);\n      };\n      position();\n      $(window).on('resize.dtb-collection', function () {\n        position();\n      });\n    }\n    if (options.background) {\n      Buttons.background(true, options.backgroundClassName, options.fade, options.backgroundHost || hostNode);\n    }\n\n    // This is bonkers, but if we don't have a click listener on the\n    // background element, iOS Safari will ignore the body click\n    // listener below. An empty function here is all that is\n    // required to make it work...\n    $('div.dt-button-background').on('click.dtb-collection', function () {});\n    if (options.autoClose) {\n      setTimeout(function () {\n        dt.on('buttons-action.b-internal', function (e, btn, dt, node) {\n          if (node[0] === hostNode[0]) {\n            return;\n          }\n          close();\n        });\n      }, 0);\n    }\n    $(display).trigger('buttons-popover.dt');\n    dt.on('destroy', close);\n    setTimeout(function () {\n      closed = false;\n      $('body').on('click.dtb-collection', function (e) {\n        if (closed) {\n          return;\n        }\n\n        // andSelf is deprecated in jQ1.8, but we want 1.7 compat\n        var back = $.fn.addBack ? 'addBack' : 'andSelf';\n        var parent = $(e.target).parent()[0];\n        if (!$(e.target).parents()[back]().filter(content).length && !$(parent).hasClass('dt-buttons') || $(e.target).hasClass('dt-button-background')) {\n          close();\n        }\n      }).on('keyup.dtb-collection', function (e) {\n        if (e.keyCode === 27) {\n          close();\n        }\n      }).on('keydown.dtb-collection', function (e) {\n        // Focus trap for tab key\n        var elements = $('a, button', content);\n        var active = document.activeElement;\n        if (e.keyCode !== 9) {\n          // tab\n          return;\n        }\n        if (elements.index(active) === -1) {\n          // If current focus is not inside the popover\n          elements.first().focus();\n          e.preventDefault();\n        } else if (e.shiftKey) {\n          // Reverse tabbing order when shift key is pressed\n          if (active === elements[0]) {\n            elements.last().focus();\n            e.preventDefault();\n          }\n        } else {\n          if (active === elements.last()[0]) {\n            elements.first().focus();\n            e.preventDefault();\n          }\n        }\n      });\n    }, 0);\n  }\n});\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\r\n * Statics\r\n */\n\n/**\r\n * Show / hide a background layer behind a collection\r\n * @param  {boolean} Flag to indicate if the background should be shown or\r\n *   hidden \r\n * @param  {string} Class to assign to the background\r\n * @static\r\n */\nButtons.background = function (show, className, fade, insertPoint) {\n  if (fade === undefined) {\n    fade = 400;\n  }\n  if (!insertPoint) {\n    insertPoint = document.body;\n  }\n  if (show) {\n    _fadeIn($('<div/>').addClass(className).css('display', 'none').insertAfter(insertPoint), fade);\n  } else {\n    _fadeOut($('div.' + className), fade, function () {\n      $(this).removeClass(className).remove();\n    });\n  }\n};\n\n/**\r\n * Instance selector - select Buttons instances based on an instance selector\r\n * value from the buttons assigned to a DataTable. This is only useful if\r\n * multiple instances are attached to a DataTable.\r\n * @param  {string|int|array} Instance selector - see `instance-selector`\r\n *   documentation on the DataTables site\r\n * @param  {array} Button instance array that was attached to the DataTables\r\n *   settings object\r\n * @return {array} Buttons instances\r\n * @static\r\n */\nButtons.instanceSelector = function (group, buttons) {\n  if (group === undefined || group === null) {\n    return $.map(buttons, function (v) {\n      return v.inst;\n    });\n  }\n  var ret = [];\n  var names = $.map(buttons, function (v) {\n    return v.name;\n  });\n\n  // Flatten the group selector into an array of single options\n  var process = function (input) {\n    if (Array.isArray(input)) {\n      for (var i = 0, ien = input.length; i < ien; i++) {\n        process(input[i]);\n      }\n      return;\n    }\n    if (typeof input === 'string') {\n      if (input.indexOf(',') !== -1) {\n        // String selector, list of names\n        process(input.split(','));\n      } else {\n        // String selector individual name\n        var idx = $.inArray(input.trim(), names);\n        if (idx !== -1) {\n          ret.push(buttons[idx].inst);\n        }\n      }\n    } else if (typeof input === 'number') {\n      // Index selector\n      ret.push(buttons[input].inst);\n    } else if (typeof input === 'object') {\n      // Actual instance selector\n      ret.push(input);\n    }\n  };\n  process(group);\n  return ret;\n};\n\n/**\r\n * Button selector - select one or more buttons from a selector input so some\r\n * operation can be performed on them.\r\n * @param  {array} Button instances array that the selector should operate on\r\n * @param  {string|int|node|jQuery|array} Button selector - see\r\n *   `button-selector` documentation on the DataTables site\r\n * @return {array} Array of objects containing `inst` and `idx` properties of\r\n *   the selected buttons so you know which instance each button belongs to.\r\n * @static\r\n */\nButtons.buttonSelector = function (insts, selector) {\n  var ret = [];\n  var nodeBuilder = function (a, buttons, baseIdx) {\n    var button;\n    var idx;\n    for (var i = 0, ien = buttons.length; i < ien; i++) {\n      button = buttons[i];\n      if (button) {\n        idx = baseIdx !== undefined ? baseIdx + i : i + '';\n        a.push({\n          node: button.node,\n          name: button.conf.name,\n          idx: idx\n        });\n        if (button.buttons) {\n          nodeBuilder(a, button.buttons, idx + '-');\n        }\n      }\n    }\n  };\n  var run = function (selector, inst) {\n    var i, ien;\n    var buttons = [];\n    nodeBuilder(buttons, inst.s.buttons);\n    var nodes = $.map(buttons, function (v) {\n      return v.node;\n    });\n    if (Array.isArray(selector) || selector instanceof $) {\n      for (i = 0, ien = selector.length; i < ien; i++) {\n        run(selector[i], inst);\n      }\n      return;\n    }\n    if (selector === null || selector === undefined || selector === '*') {\n      // Select all\n      for (i = 0, ien = buttons.length; i < ien; i++) {\n        ret.push({\n          inst: inst,\n          node: buttons[i].node\n        });\n      }\n    } else if (typeof selector === 'number') {\n      // Main button index selector\n      if (inst.s.buttons[selector]) {\n        ret.push({\n          inst: inst,\n          node: inst.s.buttons[selector].node\n        });\n      }\n    } else if (typeof selector === 'string') {\n      if (selector.indexOf(',') !== -1) {\n        // Split\n        var a = selector.split(',');\n        for (i = 0, ien = a.length; i < ien; i++) {\n          run(a[i].trim(), inst);\n        }\n      } else if (selector.match(/^\\d+(\\-\\d+)*$/)) {\n        // Sub-button index selector\n        var indexes = $.map(buttons, function (v) {\n          return v.idx;\n        });\n        ret.push({\n          inst: inst,\n          node: buttons[$.inArray(selector, indexes)].node\n        });\n      } else if (selector.indexOf(':name') !== -1) {\n        // Button name selector\n        var name = selector.replace(':name', '');\n        for (i = 0, ien = buttons.length; i < ien; i++) {\n          if (buttons[i].name === name) {\n            ret.push({\n              inst: inst,\n              node: buttons[i].node\n            });\n          }\n        }\n      } else {\n        // jQuery selector on the nodes\n        $(nodes).filter(selector).each(function () {\n          ret.push({\n            inst: inst,\n            node: this\n          });\n        });\n      }\n    } else if (typeof selector === 'object' && selector.nodeName) {\n      // Node selector\n      var idx = $.inArray(selector, nodes);\n      if (idx !== -1) {\n        ret.push({\n          inst: inst,\n          node: nodes[idx]\n        });\n      }\n    }\n  };\n  for (var i = 0, ien = insts.length; i < ien; i++) {\n    var inst = insts[i];\n    run(selector, inst);\n  }\n  return ret;\n};\n\n/**\r\n * Default function used for formatting output data.\r\n * @param {*} str Data to strip\r\n */\nButtons.stripData = function (str, config) {\n  if (typeof str !== 'string') {\n    return str;\n  }\n\n  // Always remove script tags\n  str = str.replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '');\n\n  // Always remove comments\n  str = str.replace(/<!\\-\\-.*?\\-\\->/g, '');\n  if (!config || config.stripHtml) {\n    str = str.replace(/<[^>]*>/g, '');\n  }\n  if (!config || config.trim) {\n    str = str.replace(/^\\s+|\\s+$/g, '');\n  }\n  if (!config || config.stripNewlines) {\n    str = str.replace(/\\n/g, ' ');\n  }\n  if (!config || config.decodeEntities) {\n    _exportTextarea.innerHTML = str;\n    str = _exportTextarea.value;\n  }\n  return str;\n};\n\n/**\r\n * Buttons defaults. For full documentation, please refer to the docs/option\r\n * directory or the DataTables site.\r\n * @type {Object}\r\n * @static\r\n */\nButtons.defaults = {\n  buttons: ['copy', 'excel', 'csv', 'pdf', 'print'],\n  name: 'main',\n  tabIndex: 0,\n  dom: {\n    container: {\n      tag: 'div',\n      className: 'dt-buttons'\n    },\n    collection: {\n      tag: 'div',\n      className: ''\n    },\n    button: {\n      tag: 'button',\n      className: 'dt-button',\n      active: 'active',\n      disabled: 'disabled',\n      spacerClass: ''\n    },\n    buttonLiner: {\n      tag: 'span',\n      className: ''\n    },\n    split: {\n      tag: 'div',\n      className: 'dt-button-split'\n    },\n    splitWrapper: {\n      tag: 'div',\n      className: 'dt-btn-split-wrapper'\n    },\n    splitDropdown: {\n      tag: 'button',\n      text: '&#x25BC;',\n      className: 'dt-btn-split-drop',\n      align: 'split-right',\n      splitAlignClass: 'dt-button-split-left'\n    },\n    splitDropdownButton: {\n      tag: 'button',\n      className: 'dt-btn-split-drop-button dt-button'\n    },\n    splitCollection: {\n      tag: 'div',\n      className: 'dt-button-split-collection'\n    }\n  }\n};\n\n/**\r\n * Version information\r\n * @type {string}\r\n * @static\r\n */\nButtons.version = '2.3.6';\n$.extend(_dtButtons, {\n  collection: {\n    text: function (dt) {\n      return dt.i18n('buttons.collection', 'Collection');\n    },\n    className: 'buttons-collection',\n    closeButton: false,\n    init: function (dt, button, config) {\n      button.attr('aria-expanded', false);\n    },\n    action: function (e, dt, button, config) {\n      if (config._collection.parents('body').length) {\n        this.popover(false, config);\n      } else {\n        this.popover(config._collection, config);\n      }\n\n      // When activated using a key - auto focus on the\n      // first item in the popover\n      if (e.type === 'keypress') {\n        $('a, button', config._collection).eq(0).focus();\n      }\n    },\n    attr: {\n      'aria-haspopup': 'dialog'\n    }\n    // Also the popover options, defined in Buttons.popover\n  },\n\n  split: {\n    text: function (dt) {\n      return dt.i18n('buttons.split', 'Split');\n    },\n    className: 'buttons-split',\n    closeButton: false,\n    init: function (dt, button, config) {\n      return button.attr('aria-expanded', false);\n    },\n    action: function (e, dt, button, config) {\n      this.popover(config._collection, config);\n    },\n    attr: {\n      'aria-haspopup': 'dialog'\n    }\n    // Also the popover options, defined in Buttons.popover\n  },\n\n  copy: function (dt, conf) {\n    if (_dtButtons.copyHtml5) {\n      return 'copyHtml5';\n    }\n  },\n  csv: function (dt, conf) {\n    if (_dtButtons.csvHtml5 && _dtButtons.csvHtml5.available(dt, conf)) {\n      return 'csvHtml5';\n    }\n  },\n  excel: function (dt, conf) {\n    if (_dtButtons.excelHtml5 && _dtButtons.excelHtml5.available(dt, conf)) {\n      return 'excelHtml5';\n    }\n  },\n  pdf: function (dt, conf) {\n    if (_dtButtons.pdfHtml5 && _dtButtons.pdfHtml5.available(dt, conf)) {\n      return 'pdfHtml5';\n    }\n  },\n  pageLength: function (dt) {\n    var lengthMenu = dt.settings()[0].aLengthMenu;\n    var vals = [];\n    var lang = [];\n    var text = function (dt) {\n      return dt.i18n('buttons.pageLength', {\n        \"-1\": 'Show all rows',\n        _: 'Show %d rows'\n      }, dt.page.len());\n    };\n\n    // Support for DataTables 1.x 2D array\n    if (Array.isArray(lengthMenu[0])) {\n      vals = lengthMenu[0];\n      lang = lengthMenu[1];\n    } else {\n      for (var i = 0; i < lengthMenu.length; i++) {\n        var option = lengthMenu[i];\n\n        // Support for DataTables 2 object in the array\n        if ($.isPlainObject(option)) {\n          vals.push(option.value);\n          lang.push(option.label);\n        } else {\n          vals.push(option);\n          lang.push(option);\n        }\n      }\n    }\n    return {\n      extend: 'collection',\n      text: text,\n      className: 'buttons-page-length',\n      autoClose: true,\n      buttons: $.map(vals, function (val, i) {\n        return {\n          text: lang[i],\n          className: 'button-page-length',\n          action: function (e, dt) {\n            dt.page.len(val).draw();\n          },\n          init: function (dt, node, conf) {\n            var that = this;\n            var fn = function () {\n              that.active(dt.page.len() === val);\n            };\n            dt.on('length.dt' + conf.namespace, fn);\n            fn();\n          },\n          destroy: function (dt, node, conf) {\n            dt.off('length.dt' + conf.namespace);\n          }\n        };\n      }),\n      init: function (dt, node, conf) {\n        var that = this;\n        dt.on('length.dt' + conf.namespace, function () {\n          that.text(conf.text);\n        });\n      },\n      destroy: function (dt, node, conf) {\n        dt.off('length.dt' + conf.namespace);\n      }\n    };\n  },\n  spacer: {\n    style: 'empty',\n    spacer: true,\n    text: function (dt) {\n      return dt.i18n('buttons.spacer', '');\n    }\n  }\n});\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\r\n * DataTables API\r\n *\r\n * For complete documentation, please refer to the docs/api directory or the\r\n * DataTables site\r\n */\n\n// Buttons group and individual button selector\nDataTable.Api.register('buttons()', function (group, selector) {\n  // Argument shifting\n  if (selector === undefined) {\n    selector = group;\n    group = undefined;\n  }\n  this.selector.buttonGroup = group;\n  var res = this.iterator(true, 'table', function (ctx) {\n    if (ctx._buttons) {\n      return Buttons.buttonSelector(Buttons.instanceSelector(group, ctx._buttons), selector);\n    }\n  }, true);\n  res._groupSelector = group;\n  return res;\n});\n\n// Individual button selector\nDataTable.Api.register('button()', function (group, selector) {\n  // just run buttons() and truncate\n  var buttons = this.buttons(group, selector);\n  if (buttons.length > 1) {\n    buttons.splice(1, buttons.length);\n  }\n  return buttons;\n});\n\n// Active buttons\nDataTable.Api.registerPlural('buttons().active()', 'button().active()', function (flag) {\n  if (flag === undefined) {\n    return this.map(function (set) {\n      return set.inst.active(set.node);\n    });\n  }\n  return this.each(function (set) {\n    set.inst.active(set.node, flag);\n  });\n});\n\n// Get / set button action\nDataTable.Api.registerPlural('buttons().action()', 'button().action()', function (action) {\n  if (action === undefined) {\n    return this.map(function (set) {\n      return set.inst.action(set.node);\n    });\n  }\n  return this.each(function (set) {\n    set.inst.action(set.node, action);\n  });\n});\n\n// Collection control\nDataTable.Api.registerPlural('buttons().collectionRebuild()', 'button().collectionRebuild()', function (buttons) {\n  return this.each(function (set) {\n    for (var i = 0; i < buttons.length; i++) {\n      if (typeof buttons[i] === 'object') {\n        buttons[i].parentConf = set;\n      }\n    }\n    set.inst.collectionRebuild(set.node, buttons);\n  });\n});\n\n// Enable / disable buttons\nDataTable.Api.register(['buttons().enable()', 'button().enable()'], function (flag) {\n  return this.each(function (set) {\n    set.inst.enable(set.node, flag);\n  });\n});\n\n// Disable buttons\nDataTable.Api.register(['buttons().disable()', 'button().disable()'], function () {\n  return this.each(function (set) {\n    set.inst.disable(set.node);\n  });\n});\n\n// Button index\nDataTable.Api.register('button().index()', function () {\n  var idx = null;\n  this.each(function (set) {\n    var res = set.inst.index(set.node);\n    if (res !== null) {\n      idx = res;\n    }\n  });\n  return idx;\n});\n\n// Get button nodes\nDataTable.Api.registerPlural('buttons().nodes()', 'button().node()', function () {\n  var jq = $();\n\n  // jQuery will automatically reduce duplicates to a single entry\n  $(this.each(function (set) {\n    jq = jq.add(set.inst.node(set.node));\n  }));\n  return jq;\n});\n\n// Get / set button processing state\nDataTable.Api.registerPlural('buttons().processing()', 'button().processing()', function (flag) {\n  if (flag === undefined) {\n    return this.map(function (set) {\n      return set.inst.processing(set.node);\n    });\n  }\n  return this.each(function (set) {\n    set.inst.processing(set.node, flag);\n  });\n});\n\n// Get / set button text (i.e. the button labels)\nDataTable.Api.registerPlural('buttons().text()', 'button().text()', function (label) {\n  if (label === undefined) {\n    return this.map(function (set) {\n      return set.inst.text(set.node);\n    });\n  }\n  return this.each(function (set) {\n    set.inst.text(set.node, label);\n  });\n});\n\n// Trigger a button's action\nDataTable.Api.registerPlural('buttons().trigger()', 'button().trigger()', function () {\n  return this.each(function (set) {\n    set.inst.node(set.node).trigger('click');\n  });\n});\n\n// Button resolver to the popover\nDataTable.Api.register('button().popover()', function (content, options) {\n  return this.map(function (set) {\n    return set.inst._popover(content, this.button(this[0].node), options);\n  });\n});\n\n// Get the container elements\nDataTable.Api.register('buttons().containers()', function () {\n  var jq = $();\n  var groupSelector = this._groupSelector;\n\n  // We need to use the group selector directly, since if there are no buttons\n  // the result set will be empty\n  this.iterator(true, 'table', function (ctx) {\n    if (ctx._buttons) {\n      var insts = Buttons.instanceSelector(groupSelector, ctx._buttons);\n      for (var i = 0, ien = insts.length; i < ien; i++) {\n        jq = jq.add(insts[i].container());\n      }\n    }\n  });\n  return jq;\n});\nDataTable.Api.register('buttons().container()', function () {\n  // API level of nesting is `buttons()` so we can zip into the containers method\n  return this.containers().eq(0);\n});\n\n// Add a new button\nDataTable.Api.register('button().add()', function (idx, conf, draw) {\n  var ctx = this.context;\n\n  // Don't use `this` as it could be empty - select the instances directly\n  if (ctx.length) {\n    var inst = Buttons.instanceSelector(this._groupSelector, ctx[0]._buttons);\n    if (inst.length) {\n      inst[0].add(conf, idx, draw);\n    }\n  }\n  return this.button(this._groupSelector, idx);\n});\n\n// Destroy the button sets selected\nDataTable.Api.register('buttons().destroy()', function () {\n  this.pluck('inst').unique().each(function (inst) {\n    inst.destroy();\n  });\n  return this;\n});\n\n// Remove a button\nDataTable.Api.registerPlural('buttons().remove()', 'buttons().remove()', function () {\n  this.each(function (set) {\n    set.inst.remove(set.node);\n  });\n  return this;\n});\n\n// Information box that can be used by buttons\nvar _infoTimer;\nDataTable.Api.register('buttons.info()', function (title, message, time) {\n  var that = this;\n  if (title === false) {\n    this.off('destroy.btn-info');\n    _fadeOut($('#datatables_buttons_info'), 400, function () {\n      $(this).remove();\n    });\n    clearTimeout(_infoTimer);\n    _infoTimer = null;\n    return this;\n  }\n  if (_infoTimer) {\n    clearTimeout(_infoTimer);\n  }\n  if ($('#datatables_buttons_info').length) {\n    $('#datatables_buttons_info').remove();\n  }\n  title = title ? '<h2>' + title + '</h2>' : '';\n  _fadeIn($('<div id=\"datatables_buttons_info\" class=\"dt-button-info\"/>').html(title).append($('<div/>')[typeof message === 'string' ? 'html' : 'append'](message)).css('display', 'none').appendTo('body'));\n  if (time !== undefined && time !== 0) {\n    _infoTimer = setTimeout(function () {\n      that.buttons.info(false);\n    }, time);\n  }\n  this.on('destroy.btn-info', function () {\n    that.buttons.info(false);\n  });\n  return this;\n});\n\n// Get data from the table for export - this is common to a number of plug-in\n// buttons so it is included in the Buttons core library\nDataTable.Api.register('buttons.exportData()', function (options) {\n  if (this.context.length) {\n    return _exportData(new DataTable.Api(this.context[0]), options);\n  }\n});\n\n// Get information about the export that is common to many of the export data\n// types (DRY)\nDataTable.Api.register('buttons.exportInfo()', function (conf) {\n  if (!conf) {\n    conf = {};\n  }\n  return {\n    filename: _filename(conf),\n    title: _title(conf),\n    messageTop: _message(this, conf.message || conf.messageTop, 'top'),\n    messageBottom: _message(this, conf.messageBottom, 'bottom')\n  };\n});\n\n/**\r\n * Get the file name for an exported file.\r\n *\r\n * @param {object}\tconfig Button configuration\r\n * @param {boolean} incExtension Include the file name extension\r\n */\nvar _filename = function (config) {\n  // Backwards compatibility\n  var filename = config.filename === '*' && config.title !== '*' && config.title !== undefined && config.title !== null && config.title !== '' ? config.title : config.filename;\n  if (typeof filename === 'function') {\n    filename = filename();\n  }\n  if (filename === undefined || filename === null) {\n    return null;\n  }\n  if (filename.indexOf('*') !== -1) {\n    filename = filename.replace('*', $('head > title').text()).trim();\n  }\n\n  // Strip characters which the OS will object to\n  filename = filename.replace(/[^a-zA-Z0-9_\\u00A1-\\uFFFF\\.,\\-_ !\\(\\)]/g, \"\");\n  var extension = _stringOrFunction(config.extension);\n  if (!extension) {\n    extension = '';\n  }\n  return filename + extension;\n};\n\n/**\r\n * Simply utility method to allow parameters to be given as a function\r\n *\r\n * @param {undefined|string|function} option Option\r\n * @return {null|string} Resolved value\r\n */\nvar _stringOrFunction = function (option) {\n  if (option === null || option === undefined) {\n    return null;\n  } else if (typeof option === 'function') {\n    return option();\n  }\n  return option;\n};\n\n/**\r\n * Get the title for an exported file.\r\n *\r\n * @param {object} config\tButton configuration\r\n */\nvar _title = function (config) {\n  var title = _stringOrFunction(config.title);\n  return title === null ? null : title.indexOf('*') !== -1 ? title.replace('*', $('head > title').text() || 'Exported data') : title;\n};\nvar _message = function (dt, option, position) {\n  var message = _stringOrFunction(option);\n  if (message === null) {\n    return null;\n  }\n  var caption = $('caption', dt.table().container()).eq(0);\n  if (message === '*') {\n    var side = caption.css('caption-side');\n    if (side !== position) {\n      return null;\n    }\n    return caption.length ? caption.text() : '';\n  }\n  return message;\n};\nvar _exportTextarea = $('<textarea/>')[0];\nvar _exportData = function (dt, inOpts) {\n  var config = $.extend(true, {}, {\n    rows: null,\n    columns: '',\n    modifier: {\n      search: 'applied',\n      order: 'applied'\n    },\n    orthogonal: 'display',\n    stripHtml: true,\n    stripNewlines: true,\n    decodeEntities: true,\n    trim: true,\n    format: {\n      header: function (d) {\n        return Buttons.stripData(d, config);\n      },\n      footer: function (d) {\n        return Buttons.stripData(d, config);\n      },\n      body: function (d) {\n        return Buttons.stripData(d, config);\n      }\n    },\n    customizeData: null\n  }, inOpts);\n  var header = dt.columns(config.columns).indexes().map(function (idx) {\n    var el = dt.column(idx).header();\n    return config.format.header(el.innerHTML, idx, el);\n  }).toArray();\n  var footer = dt.table().footer() ? dt.columns(config.columns).indexes().map(function (idx) {\n    var el = dt.column(idx).footer();\n    return config.format.footer(el ? el.innerHTML : '', idx, el);\n  }).toArray() : null;\n\n  // If Select is available on this table, and any rows are selected, limit the export\n  // to the selected rows. If no rows are selected, all rows will be exported. Specify\n  // a `selected` modifier to control directly.\n  var modifier = $.extend({}, config.modifier);\n  if (dt.select && typeof dt.select.info === 'function' && modifier.selected === undefined) {\n    if (dt.rows(config.rows, $.extend({\n      selected: true\n    }, modifier)).any()) {\n      $.extend(modifier, {\n        selected: true\n      });\n    }\n  }\n  var rowIndexes = dt.rows(config.rows, modifier).indexes().toArray();\n  var selectedCells = dt.cells(rowIndexes, config.columns);\n  var cells = selectedCells.render(config.orthogonal).toArray();\n  var cellNodes = selectedCells.nodes().toArray();\n  var columns = header.length;\n  var rows = columns > 0 ? cells.length / columns : 0;\n  var body = [];\n  var cellCounter = 0;\n  for (var i = 0, ien = rows; i < ien; i++) {\n    var row = [columns];\n    for (var j = 0; j < columns; j++) {\n      row[j] = config.format.body(cells[cellCounter], i, j, cellNodes[cellCounter]);\n      cellCounter++;\n    }\n    body[i] = row;\n  }\n  var data = {\n    header: header,\n    footer: footer,\n    body: body\n  };\n  if (config.customizeData) {\n    config.customizeData(data);\n  }\n  return data;\n};\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\r\n * DataTables interface\r\n */\n\n// Attach to DataTables objects for global access\n$.fn.dataTable.Buttons = Buttons;\n$.fn.DataTable.Buttons = Buttons;\n\n// DataTables creation - check if the buttons have been defined for this table,\n// they will have been if the `B` option was used in `dom`, otherwise we should\n// create the buttons instance here so they can be inserted into the document\n// using the API. Listen for `init` for compatibility with pre 1.10.10, but to\n// be removed in future.\n$(document).on('init.dt plugin-init.dt', function (e, settings) {\n  if (e.namespace !== 'dt') {\n    return;\n  }\n  var opts = settings.oInit.buttons || DataTable.defaults.buttons;\n  if (opts && !settings._buttons) {\n    new Buttons(settings, opts).container();\n  }\n});\nfunction _init(settings, options) {\n  var api = new DataTable.Api(settings);\n  var opts = options ? options : api.init().buttons || DataTable.defaults.buttons;\n  return new Buttons(api, opts).container();\n}\n\n// DataTables `dom` feature option\nDataTable.ext.feature.push({\n  fnInit: _init,\n  cFeature: \"B\"\n});\n\n// DataTables 2 layout feature\nif (DataTable.ext.features) {\n  DataTable.ext.features.register('buttons', _init);\n}\nexport default DataTable;","map":{"version":3,"names":["$","DataTable","_instCounter","_buttonCounter","_dtButtons","ext","buttons","_fadeIn","el","duration","fn","animate","stop","fadeIn","css","call","_fadeOut","fadeOut","Buttons","dt","config","settings","container","Array","isArray","c","extend","defaults","s","Api","listenKeys","namespace","dom","tag","addClass","className","_constructor","prototype","action","node","button","_nodeToButton","undefined","conf","active","flag","klass","jqNode","hasClass","toggleClass","add","idx","draw","split","base","i","ien","length","_expandButton","_draw","collectionRebuild","newButtons","remove","prefixButtons","unshift","apply","postfixButtons","push","newBtn","parentConf","collection","disable","disabled","prop","destroy","off","slice","buttonInsts","inst","splice","enable","removeClass","index","nested","inner","match","name","processing","table","triggerHandler","host","_nodeToHost","destroying","_removeKey","inArray","text","label","buttonLiner","linerTag","inCollection","opt","children","eq","filter","html","that","dtSettings","_buttons","on","e","document","activeElement","body","character","String","fromCharCode","keyCode","toLowerCase","indexOf","_keypress","_addKey","key","isPlainObject","detach","append","inserter","attachTo","inSplit","attachPoint","buttonCounter","isSplit","_resolveExtends","built","_buildButton","splitCollection","_collection","j","parent","collectionLayout","dropup","fade","splitDropdown","init","buttonDom","linerDom","collectionDom","splitDom","splitCollectionDom","splitDropdownButton","spacer","style","spacerClass","available","hasOwnProperty","clickBlurs","attr","iTabIndex","id","preventDefault","trigger","liner","enabled","titleAttr","buttonContainer","buttonCreated","splitDiv","splitWrapper","dropButtonConfig","closeButton","align","splitAlignClass","splitAction","dropButton","stopPropagation","get","ret","_buttonsHandled","run","click","shiftKey","altKey","ctrlKey","metaKey","recurse","a","join","toConfObject","loop","objArray","originalClassName","_popover","content","hostButton","inOpts","buttonsSettings","closed","options","autoClose","background","backgroundClassName","contentClassName","collectionTitle","popoverTitle","rightAlignClassName","hostNode","close","nodes","window","existingExpanded","closest","cnt","mod","display","role","appendTo","parents","lastChild","prepend","insertAfter","tableContainer","position","span","width","offsetParent","buttonPosition","buttonOffset","offset","tableSizes","containerPosition","computed","getComputedStyle","height","outerHeight","parseFloat","paddingLeft","right","left","bottom","top","popoverSizes","outerWidth","marginTop","marginBottom","scrollTop","half","backgroundHost","setTimeout","btn","back","addBack","target","elements","first","focus","last","show","insertPoint","instanceSelector","group","map","v","names","process","input","trim","buttonSelector","insts","selector","nodeBuilder","baseIdx","indexes","replace","each","nodeName","stripData","str","stripHtml","stripNewlines","decodeEntities","_exportTextarea","innerHTML","value","tabIndex","version","i18n","popover","type","copy","copyHtml5","csv","csvHtml5","excel","excelHtml5","pdf","pdfHtml5","pageLength","lengthMenu","aLengthMenu","vals","lang","_","page","len","option","val","register","buttonGroup","res","iterator","ctx","_groupSelector","registerPlural","set","jq","groupSelector","containers","context","pluck","unique","_infoTimer","title","message","time","clearTimeout","info","_exportData","filename","_filename","_title","messageTop","_message","messageBottom","extension","_stringOrFunction","caption","side","rows","columns","modifier","search","order","orthogonal","format","header","d","footer","customizeData","column","toArray","select","selected","any","rowIndexes","selectedCells","cells","render","cellNodes","cellCounter","row","data","dataTable","opts","oInit","_init","api","feature","fnInit","cFeature","features"],"sources":["D:/filee/SISTEM-INFORMASI-SEKOLAH-SMKN-1-JETIS-MASTER/frontend/node_modules/datatables.net-buttons/js/dataTables.buttons.mjs"],"sourcesContent":["/*! Buttons for DataTables 2.3.6\r\n * Â©2016-2023 SpryMedia Ltd - datatables.net/license\r\n */\r\n\r\nimport $ from 'jquery';\r\nimport DataTable from 'datatables.net';\r\n\r\n\r\n// Used for namespacing events added to the document by each instance, so they\r\n// can be removed on destroy\r\nvar _instCounter = 0;\r\n\r\n// Button namespacing counter for namespacing events on individual buttons\r\nvar _buttonCounter = 0;\r\n\r\nvar _dtButtons = DataTable.ext.buttons;\r\n\r\n// Allow for jQuery slim\r\nfunction _fadeIn(el, duration, fn) {\r\n\tif ($.fn.animate) {\r\n\t\tel\r\n\t\t\t.stop()\r\n\t\t\t.fadeIn( duration, fn );\r\n\r\n\t}\r\n\telse {\r\n\t\tel.css('display', 'block');\r\n\r\n\t\tif (fn) {\r\n\t\t\tfn.call(el);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction _fadeOut(el, duration, fn) {\r\n\tif ($.fn.animate) {\r\n\t\tel\r\n\t\t\t.stop()\r\n\t\t\t.fadeOut( duration, fn );\r\n\t}\r\n\telse {\r\n\t\tel.css('display', 'none');\r\n\t\t\r\n\t\tif (fn) {\r\n\t\t\tfn.call(el);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * [Buttons description]\r\n * @param {[type]}\r\n * @param {[type]}\r\n */\r\nvar Buttons = function( dt, config )\r\n{\r\n\t// If not created with a `new` keyword then we return a wrapper function that\r\n\t// will take the settings object for a DT. This allows easy use of new instances\r\n\t// with the `layout` option - e.g. `topLeft: $.fn.dataTable.Buttons( ... )`.\r\n\tif ( !(this instanceof Buttons) ) {\r\n\t\treturn function (settings) {\r\n\t\t\treturn new Buttons( settings, dt ).container();\r\n\t\t};\r\n\t}\r\n\r\n\t// If there is no config set it to an empty object\r\n\tif ( typeof( config ) === 'undefined' ) {\r\n\t\tconfig = {};\t\r\n\t}\r\n\t\r\n\t// Allow a boolean true for defaults\r\n\tif ( config === true ) {\r\n\t\tconfig = {};\r\n\t}\r\n\r\n\t// For easy configuration of buttons an array can be given\r\n\tif ( Array.isArray( config ) ) {\r\n\t\tconfig = { buttons: config };\r\n\t}\r\n\r\n\tthis.c = $.extend( true, {}, Buttons.defaults, config );\r\n\r\n\t// Don't want a deep copy for the buttons\r\n\tif ( config.buttons ) {\r\n\t\tthis.c.buttons = config.buttons;\r\n\t}\r\n\r\n\tthis.s = {\r\n\t\tdt: new DataTable.Api( dt ),\r\n\t\tbuttons: [],\r\n\t\tlistenKeys: '',\r\n\t\tnamespace: 'dtb'+(_instCounter++)\r\n\t};\r\n\r\n\tthis.dom = {\r\n\t\tcontainer: $('<'+this.c.dom.container.tag+'/>')\r\n\t\t\t.addClass( this.c.dom.container.className )\r\n\t};\r\n\r\n\tthis._constructor();\r\n};\r\n\r\n\r\n$.extend( Buttons.prototype, {\r\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\r\n\t * Public methods\r\n\t */\r\n\r\n\t/**\r\n\t * Get the action of a button\r\n\t * @param  {int|string} Button index\r\n\t * @return {function}\r\n\t *//**\r\n\t * Set the action of a button\r\n\t * @param  {node} node Button element\r\n\t * @param  {function} action Function to set\r\n\t * @return {Buttons} Self for chaining\r\n\t */\r\n\taction: function ( node, action )\r\n\t{\r\n\t\tvar button = this._nodeToButton( node );\r\n\r\n\t\tif ( action === undefined ) {\r\n\t\t\treturn button.conf.action;\r\n\t\t}\r\n\r\n\t\tbutton.conf.action = action;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Add an active class to the button to make to look active or get current\r\n\t * active state.\r\n\t * @param  {node} node Button element\r\n\t * @param  {boolean} [flag] Enable / disable flag\r\n\t * @return {Buttons} Self for chaining or boolean for getter\r\n\t */\r\n\tactive: function ( node, flag ) {\r\n\t\tvar button = this._nodeToButton( node );\r\n\t\tvar klass = this.c.dom.button.active;\r\n\t\tvar jqNode = $(button.node);\r\n\r\n\t\tif ( flag === undefined ) {\r\n\t\t\treturn jqNode.hasClass( klass );\r\n\t\t}\r\n\r\n\t\tjqNode.toggleClass( klass, flag === undefined ? true : flag );\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Add a new button\r\n\t * @param {object} config Button configuration object, base string name or function\r\n\t * @param {int|string} [idx] Button index for where to insert the button\r\n\t * @param {boolean} [draw=true] Trigger a draw. Set a false when adding\r\n\t *   lots of buttons, until the last button.\r\n\t * @return {Buttons} Self for chaining\r\n\t */\r\n\tadd: function ( config, idx, draw )\r\n\t{\r\n\t\tvar buttons = this.s.buttons;\r\n\r\n\t\tif ( typeof idx === 'string' ) {\r\n\t\t\tvar split = idx.split('-');\r\n\t\t\tvar base = this.s;\r\n\r\n\t\t\tfor ( var i=0, ien=split.length-1 ; i<ien ; i++ ) {\r\n\t\t\t\tbase = base.buttons[ split[i]*1 ];\r\n\t\t\t}\r\n\r\n\t\t\tbuttons = base.buttons;\r\n\t\t\tidx = split[ split.length-1 ]*1;\r\n\t\t}\r\n\r\n\t\tthis._expandButton(\r\n\t\t\tbuttons,\r\n\t\t\tconfig,\r\n\t\t\tconfig !== undefined ? config.split : undefined,\r\n\t\t\t(config === undefined || config.split === undefined || config.split.length === 0) && base !== undefined,\r\n\t\t\tfalse,\r\n\t\t\tidx\r\n\t\t);\r\n\r\n\t\tif (draw === undefined || draw === true) {\r\n\t\t\tthis._draw();\r\n\t\t}\r\n\t\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Clear buttons from a collection and then insert new buttons\r\n\t */\r\n\tcollectionRebuild: function ( node, newButtons )\r\n\t{\r\n\t\tvar button = this._nodeToButton( node );\r\n\t\t\r\n\t\tif(newButtons !== undefined) {\r\n\t\t\tvar i;\r\n\t\t\t// Need to reverse the array\r\n\t\t\tfor (i=button.buttons.length-1; i>=0; i--) {\r\n\t\t\t\tthis.remove(button.buttons[i].node);\r\n\t\t\t}\r\n\r\n\t\t\t// If the collection has prefix and / or postfix buttons we need to add them in\r\n\t\t\tif (button.conf.prefixButtons) {\r\n\t\t\t\tnewButtons.unshift.apply(newButtons, button.conf.prefixButtons);\r\n\t\t\t}\r\n\r\n\t\t\tif (button.conf.postfixButtons) {\r\n\t\t\t\tnewButtons.push.apply(newButtons, button.conf.postfixButtons);\r\n\t\t\t}\r\n\r\n\t\t\tfor (i=0; i<newButtons.length; i++) {\r\n\t\t\t\tvar newBtn = newButtons[i];\r\n\r\n\t\t\t\tthis._expandButton(\r\n\t\t\t\t\tbutton.buttons,\r\n\t\t\t\t\tnewBtn,\r\n\t\t\t\t\tnewBtn !== undefined && newBtn.config !== undefined && newBtn.config.split !== undefined,\r\n\t\t\t\t\ttrue,\r\n\t\t\t\t\tnewBtn.parentConf !== undefined && newBtn.parentConf.split !== undefined,\r\n\t\t\t\t\tnull,\r\n\t\t\t\t\tnewBtn.parentConf\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._draw(button.collection, button.buttons);\r\n\t},\r\n\r\n\t/**\r\n\t * Get the container node for the buttons\r\n\t * @return {jQuery} Buttons node\r\n\t */\r\n\tcontainer: function ()\r\n\t{\r\n\t\treturn this.dom.container;\r\n\t},\r\n\r\n\t/**\r\n\t * Disable a button\r\n\t * @param  {node} node Button node\r\n\t * @return {Buttons} Self for chaining\r\n\t */\r\n\tdisable: function ( node ) {\r\n\t\tvar button = this._nodeToButton( node );\r\n\r\n\t\t$(button.node)\r\n\t\t\t.addClass( this.c.dom.button.disabled )\r\n\t\t\t.prop('disabled', true);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Destroy the instance, cleaning up event handlers and removing DOM\r\n\t * elements\r\n\t * @return {Buttons} Self for chaining\r\n\t */\r\n\tdestroy: function ()\r\n\t{\r\n\t\t// Key event listener\r\n\t\t$('body').off( 'keyup.'+this.s.namespace );\r\n\r\n\t\t// Individual button destroy (so they can remove their own events if\r\n\t\t// needed). Take a copy as the array is modified by `remove`\r\n\t\tvar buttons = this.s.buttons.slice();\r\n\t\tvar i, ien;\r\n\t\t\r\n\t\tfor ( i=0, ien=buttons.length ; i<ien ; i++ ) {\r\n\t\t\tthis.remove( buttons[i].node );\r\n\t\t}\r\n\r\n\t\t// Container\r\n\t\tthis.dom.container.remove();\r\n\r\n\t\t// Remove from the settings object collection\r\n\t\tvar buttonInsts = this.s.dt.settings()[0];\r\n\r\n\t\tfor ( i=0, ien=buttonInsts.length ; i<ien ; i++ ) {\r\n\t\t\tif ( buttonInsts.inst === this ) {\r\n\t\t\t\tbuttonInsts.splice( i, 1 );\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Enable / disable a button\r\n\t * @param  {node} node Button node\r\n\t * @param  {boolean} [flag=true] Enable / disable flag\r\n\t * @return {Buttons} Self for chaining\r\n\t */\r\n\tenable: function ( node, flag )\r\n\t{\r\n\t\tif ( flag === false ) {\r\n\t\t\treturn this.disable( node );\r\n\t\t}\r\n\r\n\t\tvar button = this._nodeToButton( node );\r\n\t\t$(button.node)\r\n\t\t\t.removeClass( this.c.dom.button.disabled )\r\n\t\t\t.prop('disabled', false);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Get a button's index\r\n\t * \r\n\t * This is internally recursive\r\n\t * @param {element} node Button to get the index of\r\n\t * @return {string} Button index\r\n\t */\r\n\tindex: function ( node, nested, buttons )\r\n\t{\r\n\t\tif ( ! nested ) {\r\n\t\t\tnested = '';\r\n\t\t\tbuttons = this.s.buttons;\r\n\t\t}\r\n\r\n\t\tfor ( var i=0, ien=buttons.length ; i<ien ; i++ ) {\r\n\t\t\tvar inner = buttons[i].buttons;\r\n\r\n\t\t\tif (buttons[i].node === node) {\r\n\t\t\t\treturn nested + i;\r\n\t\t\t}\r\n\r\n\t\t\tif ( inner && inner.length ) {\r\n\t\t\t\tvar match = this.index(node, i + '-', inner);\r\n\r\n\t\t\t\tif (match !== null) {\r\n\t\t\t\t\treturn match;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Get the instance name for the button set selector\r\n\t * @return {string} Instance name\r\n\t */\r\n\tname: function ()\r\n\t{\r\n\t\treturn this.c.name;\r\n\t},\r\n\r\n\t/**\r\n\t * Get a button's node of the buttons container if no button is given\r\n\t * @param  {node} [node] Button node\r\n\t * @return {jQuery} Button element, or container\r\n\t */\r\n\tnode: function ( node )\r\n\t{\r\n\t\tif ( ! node ) {\r\n\t\t\treturn this.dom.container;\r\n\t\t}\r\n\r\n\t\tvar button = this._nodeToButton( node );\r\n\t\treturn $(button.node);\r\n\t},\r\n\r\n\t/**\r\n\t * Set / get a processing class on the selected button\r\n\t * @param {element} node Triggering button node\r\n\t * @param  {boolean} flag true to add, false to remove, undefined to get\r\n\t * @return {boolean|Buttons} Getter value or this if a setter.\r\n\t */\r\n\tprocessing: function ( node, flag )\r\n\t{\r\n\t\tvar dt = this.s.dt;\r\n\t\tvar button = this._nodeToButton( node );\r\n\r\n\t\tif ( flag === undefined ) {\r\n\t\t\treturn $(button.node).hasClass( 'processing' );\r\n\t\t}\r\n\r\n\t\t$(button.node).toggleClass( 'processing', flag );\r\n\r\n\t\t$(dt.table().node()).triggerHandler( 'buttons-processing.dt', [\r\n\t\t\tflag, dt.button( node ), dt, $(node), button.conf\r\n\t\t] );\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Remove a button.\r\n\t * @param  {node} node Button node\r\n\t * @return {Buttons} Self for chaining\r\n\t */\r\n\tremove: function ( node )\r\n\t{\r\n\t\tvar button = this._nodeToButton( node );\r\n\t\tvar host = this._nodeToHost( node );\r\n\t\tvar dt = this.s.dt;\r\n\r\n\t\t// Remove any child buttons first\r\n\t\tif ( button.buttons.length ) {\r\n\t\t\tfor ( var i=button.buttons.length-1 ; i>=0 ; i-- ) {\r\n\t\t\t\tthis.remove( button.buttons[i].node );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbutton.conf.destroying = true;\r\n\r\n\t\t// Allow the button to remove event handlers, etc\r\n\t\tif ( button.conf.destroy ) {\r\n\t\t\tbutton.conf.destroy.call( dt.button(node), dt, $(node), button.conf );\r\n\t\t}\r\n\r\n\t\tthis._removeKey( button.conf );\r\n\r\n\t\t$(button.node).remove();\r\n\r\n\t\tvar idx = $.inArray( button, host );\r\n\t\thost.splice( idx, 1 );\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Get the text for a button\r\n\t * @param  {int|string} node Button index\r\n\t * @return {string} Button text\r\n\t *//**\r\n\t * Set the text for a button\r\n\t * @param  {int|string|function} node Button index\r\n\t * @param  {string} label Text\r\n\t * @return {Buttons} Self for chaining\r\n\t */\r\n\ttext: function ( node, label )\r\n\t{\r\n\t\tvar button = this._nodeToButton( node );\r\n\t\tvar buttonLiner = this.c.dom.collection.buttonLiner;\r\n\t\tvar linerTag = button.inCollection && buttonLiner && buttonLiner.tag ?\r\n\t\t\tbuttonLiner.tag :\r\n\t\t\tthis.c.dom.buttonLiner.tag;\r\n\t\tvar dt = this.s.dt;\r\n\t\tvar jqNode = $(button.node);\r\n\t\tvar text = function ( opt ) {\r\n\t\t\treturn typeof opt === 'function' ?\r\n\t\t\t\topt( dt, jqNode, button.conf ) :\r\n\t\t\t\topt;\r\n\t\t};\r\n\r\n\t\tif ( label === undefined ) {\r\n\t\t\treturn text( button.conf.text );\r\n\t\t}\r\n\r\n\t\tbutton.conf.text = label;\r\n\r\n\t\tif ( linerTag ) {\r\n\t\t\tjqNode\r\n\t\t\t\t.children( linerTag )\r\n\t\t\t\t.eq(0)\r\n\t\t\t\t.filter(':not(.dt-down-arrow)')\r\n\t\t\t\t.html( text(label) );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tjqNode.html( text(label) );\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\r\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\r\n\t * Constructor\r\n\t */\r\n\r\n\t/**\r\n\t * Buttons constructor\r\n\t * @private\r\n\t */\r\n\t_constructor: function ()\r\n\t{\r\n\t\tvar that = this;\r\n\t\tvar dt = this.s.dt;\r\n\t\tvar dtSettings = dt.settings()[0];\r\n\t\tvar buttons =  this.c.buttons;\r\n\r\n\t\tif ( ! dtSettings._buttons ) {\r\n\t\t\tdtSettings._buttons = [];\r\n\t\t}\r\n\r\n\t\tdtSettings._buttons.push( {\r\n\t\t\tinst: this,\r\n\t\t\tname: this.c.name\r\n\t\t} );\r\n\r\n\t\tfor ( var i=0, ien=buttons.length ; i<ien ; i++ ) {\r\n\t\t\tthis.add( buttons[i] );\r\n\t\t}\r\n\r\n\t\tdt.on( 'destroy', function ( e, settings ) {\r\n\t\t\tif ( settings === dtSettings ) {\r\n\t\t\t\tthat.destroy();\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\t// Global key event binding to listen for button keys\r\n\t\t$('body').on( 'keyup.'+this.s.namespace, function ( e ) {\r\n\t\t\tif ( ! document.activeElement || document.activeElement === document.body ) {\r\n\t\t\t\t// SUse a string of characters for fast lookup of if we need to\r\n\t\t\t\t// handle this\r\n\t\t\t\tvar character = String.fromCharCode(e.keyCode).toLowerCase();\r\n\r\n\t\t\t\tif ( that.s.listenKeys.toLowerCase().indexOf( character ) !== -1 ) {\r\n\t\t\t\t\tthat._keypress( character, e );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\t},\r\n\r\n\r\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\r\n\t * Private methods\r\n\t */\r\n\r\n\t/**\r\n\t * Add a new button to the key press listener\r\n\t * @param {object} conf Resolved button configuration object\r\n\t * @private\r\n\t */\r\n\t_addKey: function ( conf )\r\n\t{\r\n\t\tif ( conf.key ) {\r\n\t\t\tthis.s.listenKeys += $.isPlainObject( conf.key ) ?\r\n\t\t\t\tconf.key.key :\r\n\t\t\t\tconf.key;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Insert the buttons into the container. Call without parameters!\r\n\t * @param  {node} [container] Recursive only - Insert point\r\n\t * @param  {array} [buttons] Recursive only - Buttons array\r\n\t * @private\r\n\t */\r\n\t_draw: function ( container, buttons )\r\n\t{\r\n\t\tif ( ! container ) {\r\n\t\t\tcontainer = this.dom.container;\r\n\t\t\tbuttons = this.s.buttons;\r\n\t\t}\r\n\r\n\t\tcontainer.children().detach();\r\n\r\n\t\tfor ( var i=0, ien=buttons.length ; i<ien ; i++ ) {\r\n\t\t\tcontainer.append( buttons[i].inserter );\r\n\t\t\tcontainer.append( ' ' );\r\n\r\n\t\t\tif ( buttons[i].buttons && buttons[i].buttons.length ) {\r\n\t\t\t\tthis._draw( buttons[i].collection, buttons[i].buttons );\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Create buttons from an array of buttons\r\n\t * @param  {array} attachTo Buttons array to attach to\r\n\t * @param  {object} button Button definition\r\n\t * @param  {boolean} inCollection true if the button is in a collection\r\n\t * @private\r\n\t */\r\n\t_expandButton: function ( attachTo, button, split, inCollection, inSplit, attachPoint, parentConf )\r\n\t{\r\n\t\tvar dt = this.s.dt;\r\n\t\tvar buttonCounter = 0;\r\n\t\tvar isSplit = false;\r\n\t\tvar buttons = ! Array.isArray( button ) ?\r\n\t\t\t[ button ] :\r\n\t\t\tbutton;\r\n\t\t\r\n\t\tif(button === undefined ) {\r\n\t\t\tbuttons = !Array.isArray(split) ?\r\n\t\t\t\t[ split ] :\r\n\t\t\t\tsplit;\r\n\t\t}\r\n\r\n\t\tif (button !== undefined && button.split !== undefined) {\r\n\t\t\tisSplit = true;\r\n\t\t}\r\n\t\t\t\r\n\t\tfor ( var i=0, ien=buttons.length ; i<ien ; i++ ) {\r\n\t\t\tvar conf = this._resolveExtends( buttons[i] );\r\n\r\n\t\t\tif ( ! conf ) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif( conf.config !== undefined && conf.config.split) {\r\n\t\t\t\tisSplit = true;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tisSplit = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// If the configuration is an array, then expand the buttons at this\r\n\t\t\t// point\r\n\t\t\tif ( Array.isArray( conf ) ) {\r\n\t\t\t\tthis._expandButton( attachTo, conf, built !== undefined && built.conf !== undefined ? built.conf.split : undefined, inCollection, parentConf !== undefined && parentConf.split !== undefined, attachPoint, parentConf );\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar built = this._buildButton( conf, inCollection, conf.split !== undefined || (conf.config !== undefined && conf.config.split !== undefined), inSplit );\r\n\t\t\tif ( ! built ) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif ( attachPoint !== undefined && attachPoint !== null ) {\r\n\t\t\t\tattachTo.splice( attachPoint, 0, built );\r\n\t\t\t\tattachPoint++;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tattachTo.push( built );\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\tif ( built.conf.buttons || built.conf.split ) {\r\n\t\t\t\tbuilt.collection = $('<'+(isSplit ? this.c.dom.splitCollection.tag : this.c.dom.collection.tag)+'/>');\r\n\r\n\t\t\t\tbuilt.conf._collection = built.collection;\r\n\r\n\t\t\t\tif(built.conf.split) {\r\n\t\t\t\t\tfor(var j = 0; j < built.conf.split.length; j++) {\r\n\t\t\t\t\t\tif(typeof built.conf.split[j] === \"object\") {\r\n\t\t\t\t\t\t\tbuilt.conf.split[j].parent = parentConf;\r\n\t\t\t\t\t\t\tif(built.conf.split[j].collectionLayout === undefined) {\r\n\t\t\t\t\t\t\t\tbuilt.conf.split[j].collectionLayout = built.conf.collectionLayout;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(built.conf.split[j].dropup === undefined) {\r\n\t\t\t\t\t\t\t\tbuilt.conf.split[j].dropup = built.conf.dropup;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(built.conf.split[j].fade === undefined) {\r\n\t\t\t\t\t\t\t\tbuilt.conf.split[j].fade = built.conf.fade;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t$(built.node).append($('<span class=\"dt-down-arrow\">'+this.c.dom.splitDropdown.text+'</span>'))\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._expandButton( built.buttons, built.conf.buttons, built.conf.split, !isSplit, isSplit, attachPoint, built.conf );\r\n\t\t\t}\r\n\t\t\tbuilt.conf.parent = parentConf;\r\n\r\n\t\t\t// init call is made here, rather than buildButton as it needs to\r\n\t\t\t// be selectable, and for that it needs to be in the buttons array\r\n\t\t\tif ( conf.init ) {\r\n\t\t\t\tconf.init.call( dt.button( built.node ), dt, $(built.node), conf );\r\n\t\t\t}\r\n\r\n\t\t\tbuttonCounter++;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Create an individual button\r\n\t * @param  {object} config            Resolved button configuration\r\n\t * @param  {boolean} inCollection `true` if a collection button\r\n\t * @return {jQuery} Created button node (jQuery)\r\n\t * @private\r\n\t */\r\n\t_buildButton: function ( config, inCollection, isSplit, inSplit )\r\n\t{\r\n\t\tvar buttonDom = this.c.dom.button;\r\n\t\tvar linerDom = this.c.dom.buttonLiner;\r\n\t\tvar collectionDom = this.c.dom.collection;\r\n\t\tvar splitDom = this.c.dom.split;\r\n\t\tvar splitCollectionDom = this.c.dom.splitCollection;\r\n\t\tvar splitDropdownButton = this.c.dom.splitDropdownButton;\r\n\t\tvar dt = this.s.dt;\r\n\t\tvar text = function ( opt ) {\r\n\t\t\treturn typeof opt === 'function' ?\r\n\t\t\t\topt( dt, button, config ) :\r\n\t\t\t\topt;\r\n\t\t};\r\n\r\n\t\t// Spacers don't do much other than insert an element into the DOM\r\n\t\tif (config.spacer) {\r\n\t\t\tvar spacer = $('<span></span>')\r\n\t\t\t\t.addClass('dt-button-spacer ' + config.style + ' ' + buttonDom.spacerClass)\r\n\t\t\t\t.html(text(config.text));\r\n\r\n\t\t\treturn {\r\n\t\t\t\tconf:         config,\r\n\t\t\t\tnode:         spacer,\r\n\t\t\t\tinserter:     spacer,\r\n\t\t\t\tbuttons:      [],\r\n\t\t\t\tinCollection: inCollection,\r\n\t\t\t\tisSplit:\t  isSplit,\r\n\t\t\t\tinSplit:\t  inSplit,\r\n\t\t\t\tcollection:   null\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif ( !isSplit && inSplit && splitCollectionDom ) {\r\n\t\t\tbuttonDom = splitDropdownButton;\r\n\t\t}\r\n\t\telse if ( !isSplit && inCollection && collectionDom.button ) {\r\n\t\t\tbuttonDom = collectionDom.button;\r\n\t\t} \r\n\r\n\t\tif ( !isSplit && inSplit && splitCollectionDom.buttonLiner ) {\r\n\t\t\tlinerDom = splitCollectionDom.buttonLiner\r\n\t\t}\r\n\t\telse if ( !isSplit && inCollection && collectionDom.buttonLiner ) {\r\n\t\t\tlinerDom = collectionDom.buttonLiner;\r\n\t\t}\r\n\r\n\t\t// Make sure that the button is available based on whatever requirements\r\n\t\t// it has. For example, PDF button require pdfmake\r\n\t\tif ( config.available && ! config.available( dt, config ) && !config.hasOwnProperty('html') ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar button;\r\n\t\tif(!config.hasOwnProperty('html')) {\r\n\t\t\tvar action = function ( e, dt, button, config ) {\r\n\t\t\t\tconfig.action.call( dt.button( button ), e, dt, button, config );\r\n\t\r\n\t\t\t\t$(dt.table().node()).triggerHandler( 'buttons-action.dt', [\r\n\t\t\t\t\tdt.button( button ), dt, button, config \r\n\t\t\t\t] );\r\n\t\t\t};\r\n\r\n\t\t\tvar tag = config.tag || buttonDom.tag;\r\n\t\t\tvar clickBlurs = config.clickBlurs === undefined\r\n\t\t\t\t? true :\r\n\t\t\t\tconfig.clickBlurs;\r\n\r\n\t\t\tbutton = $('<'+tag+'/>')\r\n\t\t\t\t.addClass( buttonDom.className )\r\n\t\t\t\t.addClass( inSplit ? this.c.dom.splitDropdownButton.className : '')\r\n\t\t\t\t.attr( 'tabindex', this.s.dt.settings()[0].iTabIndex )\r\n\t\t\t\t.attr( 'aria-controls', this.s.dt.table().node().id )\r\n\t\t\t\t.on( 'click.dtb', function (e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\r\n\t\t\t\t\tif ( ! button.hasClass( buttonDom.disabled ) && config.action ) {\r\n\t\t\t\t\t\taction( e, dt, button, config );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( clickBlurs ) {\r\n\t\t\t\t\t\tbutton.trigger('blur');\r\n\t\t\t\t\t}\r\n\t\t\t\t} )\r\n\t\t\t\t.on( 'keypress.dtb', function (e) {\r\n\t\t\t\t\tif ( e.keyCode === 13 ) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\t\tif ( ! button.hasClass( buttonDom.disabled ) && config.action ) {\r\n\t\t\t\t\t\t\taction( e, dt, button, config );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\r\n\t\t\t// Make `a` tags act like a link\r\n\t\t\tif ( tag.toLowerCase() === 'a' ) {\r\n\t\t\t\tbutton.attr( 'href', '#' );\r\n\t\t\t}\r\n\t\r\n\t\t\t// Button tags should have `type=button` so they don't have any default behaviour\r\n\t\t\tif ( tag.toLowerCase() === 'button' ) {\r\n\t\t\t\tbutton.attr( 'type', 'button' );\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( linerDom.tag ) {\r\n\t\t\t\tvar liner = $('<'+linerDom.tag+'/>')\r\n\t\t\t\t\t.html( text( config.text ) )\r\n\t\t\t\t\t.addClass( linerDom.className );\r\n\t\r\n\t\t\t\tif ( linerDom.tag.toLowerCase() === 'a' ) {\r\n\t\t\t\t\tliner.attr( 'href', '#' );\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tbutton.append( liner );\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tbutton.html( text( config.text ) );\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( config.enabled === false ) {\r\n\t\t\t\tbutton.addClass( buttonDom.disabled );\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( config.className ) {\r\n\t\t\t\tbutton.addClass( config.className );\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( config.titleAttr ) {\r\n\t\t\t\tbutton.attr( 'title', text( config.titleAttr ) );\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( config.attr ) {\r\n\t\t\t\tbutton.attr( config.attr );\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( ! config.namespace ) {\r\n\t\t\t\tconfig.namespace = '.dt-button-'+(_buttonCounter++);\r\n\t\t\t}\r\n\r\n\t\t\tif  ( config.config !== undefined && config.config.split ) {\r\n\t\t\t\tconfig.split = config.config.split;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tbutton = $(config.html)\r\n\t\t}\r\n\t\r\n\t\tvar buttonContainer = this.c.dom.buttonContainer;\r\n\t\tvar inserter;\r\n\t\tif ( buttonContainer && buttonContainer.tag ) {\r\n\t\t\tinserter = $('<'+buttonContainer.tag+'/>')\r\n\t\t\t\t.addClass( buttonContainer.className )\r\n\t\t\t\t.append( button );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tinserter = button;\r\n\t\t}\r\n\r\n\t\tthis._addKey( config );\r\n\r\n\t\t// Style integration callback for DOM manipulation\r\n\t\t// Note that this is _not_ documented. It is currently\r\n\t\t// for style integration only\r\n\t\tif( this.c.buttonCreated ) {\r\n\t\t\tinserter = this.c.buttonCreated( config, inserter );\r\n\t\t}\r\n\r\n\t\tvar splitDiv;\r\n\t\tif(isSplit) {\r\n\t\t\tsplitDiv = $('<div/>').addClass(this.c.dom.splitWrapper.className)\r\n\t\t\tsplitDiv.append(button);\r\n\t\t\tvar dropButtonConfig = $.extend(config, {\r\n\t\t\t\ttext: this.c.dom.splitDropdown.text,\r\n\t\t\t\tclassName: this.c.dom.splitDropdown.className,\r\n\t\t\t\tcloseButton: false,\r\n\t\t\t\tattr: {\r\n\t\t\t\t\t'aria-haspopup': 'dialog',\r\n\t\t\t\t\t'aria-expanded': false\r\n\t\t\t\t},\r\n\t\t\t\talign: this.c.dom.splitDropdown.align,\r\n\t\t\t\tsplitAlignClass: this.c.dom.splitDropdown.splitAlignClass\r\n\t\t\t\t\r\n\t\t\t})\r\n\r\n\t\t\tthis._addKey(dropButtonConfig);\r\n\r\n\t\t\tvar splitAction = function ( e, dt, button, config ) {\r\n\t\t\t\t_dtButtons.split.action.call( dt.button(splitDiv), e, dt, button, config );\r\n\t\r\n\t\t\t\t$(dt.table().node()).triggerHandler( 'buttons-action.dt', [\r\n\t\t\t\t\tdt.button( button ), dt, button, config \r\n\t\t\t\t] );\r\n\t\t\t\tbutton.attr('aria-expanded', true)\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tvar dropButton = $('<button class=\"' + this.c.dom.splitDropdown.className + ' dt-button\"><span class=\"dt-btn-split-drop-arrow\">'+this.c.dom.splitDropdown.text+'</span></button>')\r\n\t\t\t\t.on( 'click.dtb', function (e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopPropagation();\r\n\r\n\t\t\t\t\tif ( ! dropButton.hasClass( buttonDom.disabled )) {\r\n\t\t\t\t\t\tsplitAction( e, dt, dropButton, dropButtonConfig );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( clickBlurs ) {\r\n\t\t\t\t\t\tdropButton.trigger('blur');\r\n\t\t\t\t\t}\r\n\t\t\t\t} )\r\n\t\t\t\t.on( 'keypress.dtb', function (e) {\r\n\t\t\t\t\tif ( e.keyCode === 13 ) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\t\tif ( ! dropButton.hasClass( buttonDom.disabled ) ) {\r\n\t\t\t\t\t\t\tsplitAction( e, dt, dropButton, dropButtonConfig );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\r\n\t\t\tif(config.split.length === 0) {\r\n\t\t\t\tdropButton.addClass('dtb-hide-drop');\r\n\t\t\t}\r\n\r\n\t\t\tsplitDiv.append(dropButton).attr(dropButtonConfig.attr);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tconf:         config,\r\n\t\t\tnode:         isSplit ? splitDiv.get(0) : button.get(0),\r\n\t\t\tinserter:     isSplit ? splitDiv : inserter,\r\n\t\t\tbuttons:      [],\r\n\t\t\tinCollection: inCollection,\r\n\t\t\tisSplit:\t  isSplit,\r\n\t\t\tinSplit:\t  inSplit,\r\n\t\t\tcollection:   null\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Get the button object from a node (recursive)\r\n\t * @param  {node} node Button node\r\n\t * @param  {array} [buttons] Button array, uses base if not defined\r\n\t * @return {object} Button object\r\n\t * @private\r\n\t */\r\n\t_nodeToButton: function ( node, buttons )\r\n\t{\r\n\t\tif ( ! buttons ) {\r\n\t\t\tbuttons = this.s.buttons;\r\n\t\t}\r\n\r\n\t\tfor ( var i=0, ien=buttons.length ; i<ien ; i++ ) {\r\n\t\t\tif ( buttons[i].node === node ) {\r\n\t\t\t\treturn buttons[i];\r\n\t\t\t}\r\n\r\n\t\t\tif ( buttons[i].buttons.length ) {\r\n\t\t\t\tvar ret = this._nodeToButton( node, buttons[i].buttons );\r\n\r\n\t\t\t\tif ( ret ) {\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Get container array for a button from a button node (recursive)\r\n\t * @param  {node} node Button node\r\n\t * @param  {array} [buttons] Button array, uses base if not defined\r\n\t * @return {array} Button's host array\r\n\t * @private\r\n\t */\r\n\t_nodeToHost: function ( node, buttons )\r\n\t{\r\n\t\tif ( ! buttons ) {\r\n\t\t\tbuttons = this.s.buttons;\r\n\t\t}\r\n\r\n\t\tfor ( var i=0, ien=buttons.length ; i<ien ; i++ ) {\r\n\t\t\tif ( buttons[i].node === node ) {\r\n\t\t\t\treturn buttons;\r\n\t\t\t}\r\n\r\n\t\t\tif ( buttons[i].buttons.length ) {\r\n\t\t\t\tvar ret = this._nodeToHost( node, buttons[i].buttons );\r\n\r\n\t\t\t\tif ( ret ) {\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Handle a key press - determine if any button's key configured matches\r\n\t * what was typed and trigger the action if so.\r\n\t * @param  {string} character The character pressed\r\n\t * @param  {object} e Key event that triggered this call\r\n\t * @private\r\n\t */\r\n\t_keypress: function ( character, e )\r\n\t{\r\n\t\t// Check if this button press already activated on another instance of Buttons\r\n\t\tif ( e._buttonsHandled ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar run = function ( conf, node ) {\r\n\t\t\tif ( ! conf.key ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( conf.key === character ) {\r\n\t\t\t\te._buttonsHandled = true;\r\n\t\t\t\t$(node).click();\r\n\t\t\t}\r\n\t\t\telse if ( $.isPlainObject( conf.key ) ) {\r\n\t\t\t\tif ( conf.key.key !== character ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( conf.key.shiftKey && ! e.shiftKey ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( conf.key.altKey && ! e.altKey ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( conf.key.ctrlKey && ! e.ctrlKey ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( conf.key.metaKey && ! e.metaKey ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Made it this far - it is good\r\n\t\t\t\te._buttonsHandled = true;\r\n\t\t\t\t$(node).click();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar recurse = function ( a ) {\r\n\t\t\tfor ( var i=0, ien=a.length ; i<ien ; i++ ) {\r\n\t\t\t\trun( a[i].conf, a[i].node );\r\n\r\n\t\t\t\tif ( a[i].buttons.length ) {\r\n\t\t\t\t\trecurse( a[i].buttons );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\trecurse( this.s.buttons );\r\n\t},\r\n\r\n\t/**\r\n\t * Remove a key from the key listener for this instance (to be used when a\r\n\t * button is removed)\r\n\t * @param  {object} conf Button configuration\r\n\t * @private\r\n\t */\r\n\t_removeKey: function ( conf )\r\n\t{\r\n\t\tif ( conf.key ) {\r\n\t\t\tvar character = $.isPlainObject( conf.key ) ?\r\n\t\t\t\tconf.key.key :\r\n\t\t\t\tconf.key;\r\n\r\n\t\t\t// Remove only one character, as multiple buttons could have the\r\n\t\t\t// same listening key\r\n\t\t\tvar a = this.s.listenKeys.split('');\r\n\t\t\tvar idx = $.inArray( character, a );\r\n\t\t\ta.splice( idx, 1 );\r\n\t\t\tthis.s.listenKeys = a.join('');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Resolve a button configuration\r\n\t * @param  {string|function|object} conf Button config to resolve\r\n\t * @return {object} Button configuration\r\n\t * @private\r\n\t */\r\n\t_resolveExtends: function ( conf )\r\n\t{\r\n\t\tvar that = this;\r\n\t\tvar dt = this.s.dt;\r\n\t\tvar i, ien;\r\n\t\tvar toConfObject = function ( base ) {\r\n\t\t\tvar loop = 0;\r\n\r\n\t\t\t// Loop until we have resolved to a button configuration, or an\r\n\t\t\t// array of button configurations (which will be iterated\r\n\t\t\t// separately)\r\n\t\t\twhile ( ! $.isPlainObject(base) && ! Array.isArray(base) ) {\r\n\t\t\t\tif ( base === undefined ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( typeof base === 'function' ) {\r\n\t\t\t\t\tbase = base.call( that, dt, conf );\r\n\r\n\t\t\t\t\tif ( ! base ) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if ( typeof base === 'string' ) {\r\n\t\t\t\t\tif ( ! _dtButtons[ base ] ) {\r\n\t\t\t\t\t\treturn {html: base}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbase = _dtButtons[ base ];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tloop++;\r\n\t\t\t\tif ( loop > 30 ) {\r\n\t\t\t\t\t// Protect against misconfiguration killing the browser\r\n\t\t\t\t\tthrow 'Buttons: Too many iterations';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn Array.isArray( base ) ?\r\n\t\t\t\tbase :\r\n\t\t\t\t$.extend( {}, base );\r\n\t\t};\r\n\r\n\t\tconf = toConfObject( conf );\r\n\r\n\t\twhile ( conf && conf.extend ) {\r\n\t\t\t// Use `toConfObject` in case the button definition being extended\r\n\t\t\t// is itself a string or a function\r\n\t\t\tif ( ! _dtButtons[ conf.extend ] ) {\r\n\t\t\t\tthrow 'Cannot extend unknown button type: '+conf.extend;\r\n\t\t\t}\r\n\r\n\t\t\tvar objArray = toConfObject( _dtButtons[ conf.extend ] );\r\n\t\t\tif ( Array.isArray( objArray ) ) {\r\n\t\t\t\treturn objArray;\r\n\t\t\t}\r\n\t\t\telse if ( ! objArray ) {\r\n\t\t\t\t// This is a little brutal as it might be possible to have a\r\n\t\t\t\t// valid button without the extend, but if there is no extend\r\n\t\t\t\t// then the host button would be acting in an undefined state\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// Stash the current class name\r\n\t\t\tvar originalClassName = objArray.className;\r\n\r\n\t\t\tif (conf.config !== undefined && objArray.config !== undefined) {\r\n\t\t\t\tconf.config = $.extend({}, objArray.config, conf.config)\r\n\t\t\t}\r\n\r\n\t\t\tconf = $.extend( {}, objArray, conf );\r\n\r\n\t\t\t// The extend will have overwritten the original class name if the\r\n\t\t\t// `conf` object also assigned a class, but we want to concatenate\r\n\t\t\t// them so they are list that is combined from all extended buttons\r\n\t\t\tif ( originalClassName && conf.className !== originalClassName ) {\r\n\t\t\t\tconf.className = originalClassName+' '+conf.className;\r\n\t\t\t}\r\n\r\n\t\t\t// Although we want the `conf` object to overwrite almost all of\r\n\t\t\t// the properties of the object being extended, the `extend`\r\n\t\t\t// property should come from the object being extended\r\n\t\t\tconf.extend = objArray.extend;\r\n\t\t}\r\n\r\n\t\t// Buttons to be added to a collection  -gives the ability to define\r\n\t\t// if buttons should be added to the start or end of a collection\r\n\t\tvar postfixButtons = conf.postfixButtons;\r\n\t\tif ( postfixButtons ) {\r\n\t\t\tif ( ! conf.buttons ) {\r\n\t\t\t\tconf.buttons = [];\r\n\t\t\t}\r\n\r\n\t\t\tfor ( i=0, ien=postfixButtons.length ; i<ien ; i++ ) {\r\n\t\t\t\tconf.buttons.push( postfixButtons[i] );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar prefixButtons = conf.prefixButtons;\r\n\t\tif ( prefixButtons ) {\r\n\t\t\tif ( ! conf.buttons ) {\r\n\t\t\t\tconf.buttons = [];\r\n\t\t\t}\r\n\r\n\t\t\tfor ( i=0, ien=prefixButtons.length ; i<ien ; i++ ) {\r\n\t\t\t\tconf.buttons.splice( i, 0, prefixButtons[i] );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn conf;\r\n\t},\r\n\r\n\t/**\r\n\t * Display (and replace if there is an existing one) a popover attached to a button\r\n\t * @param {string|node} content Content to show\r\n\t * @param {DataTable.Api} hostButton DT API instance of the button\r\n\t * @param {object} inOpts Options (see object below for all options)\r\n\t */\r\n\t_popover: function ( content, hostButton, inOpts, e ) {\r\n\t\tvar dt = hostButton;\r\n\t\tvar buttonsSettings = this.c;\r\n\t\tvar closed = false;\r\n\t\tvar options = $.extend( {\r\n\t\t\talign: 'button-left', // button-right, dt-container, split-left, split-right\r\n\t\t\tautoClose: false,\r\n\t\t\tbackground: true,\r\n\t\t\tbackgroundClassName: 'dt-button-background',\r\n\t\t\tcloseButton: true,\r\n\t\t\tcontentClassName: buttonsSettings.dom.collection.className,\r\n\t\t\tcollectionLayout: '',\r\n\t\t\tcollectionTitle: '',\r\n\t\t\tdropup: false,\r\n\t\t\tfade: 400,\r\n\t\t\tpopoverTitle: '',\r\n\t\t\trightAlignClassName: 'dt-button-right',\r\n\t\t\ttag: buttonsSettings.dom.collection.tag\r\n\t\t}, inOpts );\r\n\r\n\t\tvar hostNode = hostButton.node();\r\n\r\n\t\tvar close = function () {\r\n\t\t\tclosed = true;\r\n\r\n\t\t\t_fadeOut(\r\n\t\t\t\t$('.dt-button-collection'),\r\n\t\t\t\toptions.fade,\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\t$(this).detach();\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\t$(dt.buttons( '[aria-haspopup=\"dialog\"][aria-expanded=\"true\"]' ).nodes())\r\n\t\t\t\t.attr('aria-expanded', 'false');\r\n\r\n\t\t\t$('div.dt-button-background').off( 'click.dtb-collection' );\r\n\t\t\tButtons.background( false, options.backgroundClassName, options.fade, hostNode );\r\n\r\n\t\t\t$(window).off('resize.resize.dtb-collection');\r\n\t\t\t$('body').off( '.dtb-collection' );\r\n\t\t\tdt.off( 'buttons-action.b-internal' );\r\n\t\t\tdt.off( 'destroy' );\r\n\t\t};\r\n\r\n\t\tif (content === false) {\r\n\t\t\tclose();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar existingExpanded = $(dt.buttons( '[aria-haspopup=\"dialog\"][aria-expanded=\"true\"]' ).nodes());\r\n\t\tif ( existingExpanded.length ) {\r\n\t\t\t// Reuse the current position if the button that was triggered is inside an existing collection\r\n\t\t\tif (hostNode.closest('div.dt-button-collection').length) {\r\n\t\t\t\thostNode = existingExpanded.eq(0);\r\n\t\t\t}\r\n\r\n\t\t\tclose();\r\n\t\t}\r\n\r\n\t\t// Try to be smart about the layout\r\n\t\tvar cnt = $('.dt-button', content).length;\r\n\t\tvar mod = '';\r\n\r\n\t\tif (cnt === 3) {\r\n\t\t\tmod = 'dtb-b3';\r\n\t\t}\r\n\t\telse if (cnt === 2) {\r\n\t\t\tmod = 'dtb-b2';\r\n\t\t}\r\n\t\telse if (cnt === 1) {\r\n\t\t\tmod = 'dtb-b1';\r\n\t\t}\r\n\r\n\t\tvar display = $('<div/>')\r\n\t\t\t.addClass('dt-button-collection')\r\n\t\t\t.addClass(options.collectionLayout)\r\n\t\t\t.addClass(options.splitAlignClass)\r\n\t\t\t.addClass(mod)\r\n\t\t\t.css('display', 'none')\r\n\t\t\t.attr({\r\n\t\t\t\t'aria-modal': true,\r\n\t\t\t\trole: 'dialog'\r\n\t\t\t});\r\n\r\n\t\tcontent = $(content)\r\n\t\t\t.addClass(options.contentClassName)\r\n\t\t\t.attr('role', 'menu')\r\n\t\t\t.appendTo(display);\r\n\r\n\t\thostNode.attr( 'aria-expanded', 'true' );\r\n\r\n\t\tif ( hostNode.parents('body')[0] !== document.body ) {\r\n\t\t\thostNode = document.body.lastChild;\r\n\t\t}\r\n\r\n\t\tif ( options.popoverTitle ) {\r\n\t\t\tdisplay.prepend('<div class=\"dt-button-collection-title\">'+options.popoverTitle+'</div>');\r\n\t\t}\r\n\t\telse if ( options.collectionTitle ) {\r\n\t\t\tdisplay.prepend('<div class=\"dt-button-collection-title\">'+options.collectionTitle+'</div>');\r\n\t\t}\r\n\r\n\t\tif (options.closeButton) {\r\n\t\t\tdisplay.prepend('<div class=\"dtb-popover-close\">x</div>').addClass('dtb-collection-closeable')\r\n\t\t}\r\n\r\n\t\t_fadeIn( display.insertAfter( hostNode ), options.fade );\r\n\r\n\t\tvar tableContainer = $( hostButton.table().container() );\r\n\t\tvar position = display.css( 'position' );\r\n\r\n\t\tif ( options.span === 'container' || options.align === 'dt-container' ) {\r\n\t\t\thostNode = hostNode.parent();\r\n\t\t\tdisplay.css('width', tableContainer.width());\r\n\t\t}\r\n\r\n\t\t// Align the popover relative to the DataTables container\r\n\t\t// Useful for wide popovers such as SearchPanes\r\n\t\tif (position === 'absolute') {\r\n\t\t\t// Align relative to the host button\r\n\t\t\tvar offsetParent = $(hostNode[0].offsetParent);\r\n\t\t\tvar buttonPosition = hostNode.position();\r\n\t\t\tvar buttonOffset = hostNode.offset();\r\n\t\t\tvar tableSizes = offsetParent.offset();\r\n\t\t\tvar containerPosition = offsetParent.position();\r\n\t\t\tvar computed = window.getComputedStyle(offsetParent[0]);\r\n\r\n\t\t\ttableSizes.height = offsetParent.outerHeight();\r\n\t\t\ttableSizes.width = offsetParent.width() + parseFloat(computed.paddingLeft);\r\n\t\t\ttableSizes.right = tableSizes.left + tableSizes.width;\r\n\t\t\ttableSizes.bottom = tableSizes.top + tableSizes.height;\r\n\r\n\t\t\t// Set the initial position so we can read height / width\r\n\t\t\tvar top = buttonPosition.top + hostNode.outerHeight();\r\n\t\t\tvar left = buttonPosition.left;\r\n\r\n\t\t\tdisplay.css( {\r\n\t\t\t\ttop: top,\r\n\t\t\t\tleft: left\r\n\t\t\t} );\r\n\r\n\t\t\t// Get the popover position\r\n\t\t\tcomputed = window.getComputedStyle(display[0]);\r\n\t\t\tvar popoverSizes = display.offset();\r\n\r\n\t\t\tpopoverSizes.height = display.outerHeight();\r\n\t\t\tpopoverSizes.width = display.outerWidth();\r\n\t\t\tpopoverSizes.right = popoverSizes.left + popoverSizes.width;\r\n\t\t\tpopoverSizes.bottom = popoverSizes.top + popoverSizes.height;\r\n\t\t\tpopoverSizes.marginTop = parseFloat(computed.marginTop);\r\n\t\t\tpopoverSizes.marginBottom = parseFloat(computed.marginBottom);\r\n\r\n\t\t\t// First position per the class requirements - pop up and right align\r\n\t\t\tif (options.dropup) {\r\n\t\t\t\ttop = buttonPosition.top - popoverSizes.height - popoverSizes.marginTop - popoverSizes.marginBottom;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.align === 'button-right' || display.hasClass( options.rightAlignClassName )) {\r\n\t\t\t\tleft = buttonPosition.left - popoverSizes.width + hostNode.outerWidth(); \r\n\t\t\t}\r\n\r\n\t\t\t// Container alignment - make sure it doesn't overflow the table container\r\n\t\t\tif (options.align === 'dt-container' || options.align === 'container') {\r\n\t\t\t\tif (left < buttonPosition.left) {\r\n\t\t\t\t\tleft = -buttonPosition.left;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (left + popoverSizes.width > tableSizes.width) {\r\n\t\t\t\t\tleft = tableSizes.width - popoverSizes.width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Window adjustment\r\n\t\t\tif (containerPosition.left + left + popoverSizes.width > $(window).width()) {\r\n\t\t\t\t// Overflowing the document to the right\r\n\t\t\t\tleft = $(window).width() - popoverSizes.width - containerPosition.left;\r\n\t\t\t}\r\n\r\n\t\t\tif (buttonOffset.left + left < 0) {\r\n\t\t\t\t// Off to the left of the document\r\n\t\t\t\tleft = -buttonOffset.left;\r\n\t\t\t}\r\n\r\n\t\t\tif (containerPosition.top + top + popoverSizes.height > $(window).height() + $(window).scrollTop()) {\r\n\t\t\t\t// Pop up if otherwise we'd need the user to scroll down\r\n\t\t\t\ttop = buttonPosition.top - popoverSizes.height - popoverSizes.marginTop - popoverSizes.marginBottom;\r\n\t\t\t}\r\n\r\n\t\t\tif (containerPosition.top + top < $(window).scrollTop()) {\r\n\t\t\t\t// Correction for when the top is beyond the top of the page\r\n\t\t\t\ttop = buttonPosition.top + hostNode.outerHeight();\r\n\t\t\t}\r\n\r\n\t\t\t// Calculations all done - now set it\r\n\t\t\tdisplay.css( {\r\n\t\t\t\ttop: top,\r\n\t\t\t\tleft: left\r\n\t\t\t} );\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// Fix position - centre on screen\r\n\t\t\tvar position = function () {\r\n\t\t\t\tvar half = $(window).height() / 2;\r\n\r\n\t\t\t\tvar top = display.height() / 2;\r\n\t\t\t\tif ( top > half ) {\r\n\t\t\t\t\ttop = half;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdisplay.css( 'marginTop', top*-1 );\r\n\t\t\t};\r\n\r\n\t\t\tposition();\r\n\r\n\t\t\t$(window).on('resize.dtb-collection', function () {\r\n\t\t\t\tposition();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif ( options.background ) {\r\n\t\t\tButtons.background(\r\n\t\t\t\ttrue,\r\n\t\t\t\toptions.backgroundClassName,\r\n\t\t\t\toptions.fade,\r\n\t\t\t\toptions.backgroundHost || hostNode\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// This is bonkers, but if we don't have a click listener on the\r\n\t\t// background element, iOS Safari will ignore the body click\r\n\t\t// listener below. An empty function here is all that is\r\n\t\t// required to make it work...\r\n\t\t$('div.dt-button-background').on( 'click.dtb-collection', function () {} );\r\n\r\n\t\tif ( options.autoClose ) {\r\n\t\t\tsetTimeout( function () {\r\n\t\t\t\tdt.on( 'buttons-action.b-internal', function (e, btn, dt, node) {\r\n\t\t\t\t\tif ( node[0] === hostNode[0] ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclose();\r\n\t\t\t\t} );\r\n\t\t\t}, 0);\r\n\t\t}\r\n\t\t\r\n\t\t$(display).trigger('buttons-popover.dt');\r\n\r\n\r\n\t\tdt.on('destroy', close);\r\n\r\n\t\tsetTimeout(function() {\r\n\t\t\tclosed = false;\r\n\t\t\t$('body')\r\n\t\t\t\t.on( 'click.dtb-collection', function (e) {\r\n\t\t\t\t\tif (closed) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// andSelf is deprecated in jQ1.8, but we want 1.7 compat\r\n\t\t\t\t\tvar back = $.fn.addBack ? 'addBack' : 'andSelf';\r\n\t\t\t\t\tvar parent = $(e.target).parent()[0];\r\n\t\r\n\t\t\t\t\tif (( ! $(e.target).parents()[back]().filter( content ).length  && !$(parent).hasClass('dt-buttons')) || $(e.target).hasClass('dt-button-background')) {\r\n\t\t\t\t\t\tclose();\r\n\t\t\t\t\t}\r\n\t\t\t\t} )\r\n\t\t\t\t.on( 'keyup.dtb-collection', function (e) {\r\n\t\t\t\t\tif ( e.keyCode === 27 ) {\r\n\t\t\t\t\t\tclose();\r\n\t\t\t\t\t}\r\n\t\t\t\t} )\r\n\t\t\t\t.on( 'keydown.dtb-collection', function (e) {\r\n\t\t\t\t\t// Focus trap for tab key\r\n\t\t\t\t\tvar elements = $('a, button', content);\r\n\t\t\t\t\tvar active = document.activeElement;\r\n\r\n\t\t\t\t\tif (e.keyCode !== 9) { // tab\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (elements.index(active) === -1) {\r\n\t\t\t\t\t\t// If current focus is not inside the popover\r\n\t\t\t\t\t\telements.first().focus();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (e.shiftKey) {\r\n\t\t\t\t\t\t// Reverse tabbing order when shift key is pressed\r\n\t\t\t\t\t\tif (active === elements[0]) {\r\n\t\t\t\t\t\t\telements.last().focus();\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (active === elements.last()[0]) {\r\n\t\t\t\t\t\t\telements.first().focus();\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t}, 0);\r\n\t}\r\n} );\r\n\r\n\r\n\r\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\r\n * Statics\r\n */\r\n\r\n/**\r\n * Show / hide a background layer behind a collection\r\n * @param  {boolean} Flag to indicate if the background should be shown or\r\n *   hidden \r\n * @param  {string} Class to assign to the background\r\n * @static\r\n */\r\nButtons.background = function ( show, className, fade, insertPoint ) {\r\n\tif ( fade === undefined ) {\r\n\t\tfade = 400;\r\n\t}\r\n\tif ( ! insertPoint ) {\r\n\t\tinsertPoint = document.body;\r\n\t}\r\n\r\n\tif ( show ) {\r\n\t\t_fadeIn(\r\n\t\t\t$('<div/>')\r\n\t\t\t\t.addClass( className )\r\n\t\t\t\t.css( 'display', 'none' )\r\n\t\t\t\t.insertAfter( insertPoint ),\r\n\t\t\tfade\r\n\t\t);\r\n\t}\r\n\telse {\r\n\t\t_fadeOut(\r\n\t\t\t$('div.'+className),\r\n\t\t\tfade,\r\n\t\t\tfunction () {\r\n\t\t\t\t$(this)\r\n\t\t\t\t\t.removeClass( className )\r\n\t\t\t\t\t.remove();\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n};\r\n\r\n/**\r\n * Instance selector - select Buttons instances based on an instance selector\r\n * value from the buttons assigned to a DataTable. This is only useful if\r\n * multiple instances are attached to a DataTable.\r\n * @param  {string|int|array} Instance selector - see `instance-selector`\r\n *   documentation on the DataTables site\r\n * @param  {array} Button instance array that was attached to the DataTables\r\n *   settings object\r\n * @return {array} Buttons instances\r\n * @static\r\n */\r\nButtons.instanceSelector = function ( group, buttons )\r\n{\r\n\tif ( group === undefined || group === null ) {\r\n\t\treturn $.map( buttons, function ( v ) {\r\n\t\t\treturn v.inst;\r\n\t\t} );\r\n\t}\r\n\r\n\tvar ret = [];\r\n\tvar names = $.map( buttons, function ( v ) {\r\n\t\treturn v.name;\r\n\t} );\r\n\r\n\t// Flatten the group selector into an array of single options\r\n\tvar process = function ( input ) {\r\n\t\tif ( Array.isArray( input ) ) {\r\n\t\t\tfor ( var i=0, ien=input.length ; i<ien ; i++ ) {\r\n\t\t\t\tprocess( input[i] );\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( typeof input === 'string' ) {\r\n\t\t\tif ( input.indexOf( ',' ) !== -1 ) {\r\n\t\t\t\t// String selector, list of names\r\n\t\t\t\tprocess( input.split(',') );\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// String selector individual name\r\n\t\t\t\tvar idx = $.inArray( input.trim(), names );\r\n\r\n\t\t\t\tif ( idx !== -1 ) {\r\n\t\t\t\t\tret.push( buttons[ idx ].inst );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if ( typeof input === 'number' ) {\r\n\t\t\t// Index selector\r\n\t\t\tret.push( buttons[ input ].inst );\r\n\t\t}\r\n\t\telse if ( typeof input === 'object' ) {\r\n\t\t\t// Actual instance selector\r\n\t\t\tret.push( input );\r\n\t\t}\r\n\t};\r\n\t\r\n\tprocess( group );\r\n\r\n\treturn ret;\r\n};\r\n\r\n/**\r\n * Button selector - select one or more buttons from a selector input so some\r\n * operation can be performed on them.\r\n * @param  {array} Button instances array that the selector should operate on\r\n * @param  {string|int|node|jQuery|array} Button selector - see\r\n *   `button-selector` documentation on the DataTables site\r\n * @return {array} Array of objects containing `inst` and `idx` properties of\r\n *   the selected buttons so you know which instance each button belongs to.\r\n * @static\r\n */\r\nButtons.buttonSelector = function ( insts, selector )\r\n{\r\n\tvar ret = [];\r\n\tvar nodeBuilder = function ( a, buttons, baseIdx ) {\r\n\t\tvar button;\r\n\t\tvar idx;\r\n\r\n\t\tfor ( var i=0, ien=buttons.length ; i<ien ; i++ ) {\r\n\t\t\tbutton = buttons[i];\r\n\r\n\t\t\tif ( button ) {\r\n\t\t\t\tidx = baseIdx !== undefined ?\r\n\t\t\t\t\tbaseIdx+i :\r\n\t\t\t\t\ti+'';\r\n\r\n\t\t\t\ta.push( {\r\n\t\t\t\t\tnode: button.node,\r\n\t\t\t\t\tname: button.conf.name,\r\n\t\t\t\t\tidx:  idx\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tif ( button.buttons ) {\r\n\t\t\t\t\tnodeBuilder( a, button.buttons, idx+'-' );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar run = function ( selector, inst ) {\r\n\t\tvar i, ien;\r\n\t\tvar buttons = [];\r\n\t\tnodeBuilder( buttons, inst.s.buttons );\r\n\r\n\t\tvar nodes = $.map( buttons, function (v) {\r\n\t\t\treturn v.node;\r\n\t\t} );\r\n\r\n\t\tif ( Array.isArray( selector ) || selector instanceof $ ) {\r\n\t\t\tfor ( i=0, ien=selector.length ; i<ien ; i++ ) {\r\n\t\t\t\trun( selector[i], inst );\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( selector === null || selector === undefined || selector === '*' ) {\r\n\t\t\t// Select all\r\n\t\t\tfor ( i=0, ien=buttons.length ; i<ien ; i++ ) {\r\n\t\t\t\tret.push( {\r\n\t\t\t\t\tinst: inst,\r\n\t\t\t\t\tnode: buttons[i].node\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if ( typeof selector === 'number' ) {\r\n\t\t\t// Main button index selector\r\n\t\t\tif (inst.s.buttons[ selector ]) {\r\n\t\t\t\tret.push( {\r\n\t\t\t\t\tinst: inst,\r\n\t\t\t\t\tnode: inst.s.buttons[ selector ].node\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if ( typeof selector === 'string' ) {\r\n\t\t\tif ( selector.indexOf( ',' ) !== -1 ) {\r\n\t\t\t\t// Split\r\n\t\t\t\tvar a = selector.split(',');\r\n\r\n\t\t\t\tfor ( i=0, ien=a.length ; i<ien ; i++ ) {\r\n\t\t\t\t\trun( a[i].trim(), inst );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if ( selector.match( /^\\d+(\\-\\d+)*$/ ) ) {\r\n\t\t\t\t// Sub-button index selector\r\n\t\t\t\tvar indexes = $.map( buttons, function (v) {\r\n\t\t\t\t\treturn v.idx;\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tret.push( {\r\n\t\t\t\t\tinst: inst,\r\n\t\t\t\t\tnode: buttons[ $.inArray( selector, indexes ) ].node\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t\telse if ( selector.indexOf( ':name' ) !== -1 ) {\r\n\t\t\t\t// Button name selector\r\n\t\t\t\tvar name = selector.replace( ':name', '' );\r\n\r\n\t\t\t\tfor ( i=0, ien=buttons.length ; i<ien ; i++ ) {\r\n\t\t\t\t\tif ( buttons[i].name === name ) {\r\n\t\t\t\t\t\tret.push( {\r\n\t\t\t\t\t\t\tinst: inst,\r\n\t\t\t\t\t\t\tnode: buttons[i].node\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// jQuery selector on the nodes\r\n\t\t\t\t$( nodes ).filter( selector ).each( function () {\r\n\t\t\t\t\tret.push( {\r\n\t\t\t\t\t\tinst: inst,\r\n\t\t\t\t\t\tnode: this\r\n\t\t\t\t\t} );\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if ( typeof selector === 'object' && selector.nodeName ) {\r\n\t\t\t// Node selector\r\n\t\t\tvar idx = $.inArray( selector, nodes );\r\n\r\n\t\t\tif ( idx !== -1 ) {\r\n\t\t\t\tret.push( {\r\n\t\t\t\t\tinst: inst,\r\n\t\t\t\t\tnode: nodes[ idx ]\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tfor ( var i=0, ien=insts.length ; i<ien ; i++ ) {\r\n\t\tvar inst = insts[i];\r\n\r\n\t\trun( selector, inst );\r\n\t}\r\n\r\n\treturn ret;\r\n};\r\n\r\n/**\r\n * Default function used for formatting output data.\r\n * @param {*} str Data to strip\r\n */\r\nButtons.stripData = function ( str, config ) {\r\n\tif ( typeof str !== 'string' ) {\r\n\t\treturn str;\r\n\t}\r\n\r\n\t// Always remove script tags\r\n\tstr = str.replace( /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '' );\r\n\r\n\t// Always remove comments\r\n\tstr = str.replace( /<!\\-\\-.*?\\-\\->/g, '' );\r\n\r\n\tif ( ! config || config.stripHtml ) {\r\n\t\tstr = str.replace( /<[^>]*>/g, '' );\r\n\t}\r\n\r\n\tif ( ! config || config.trim ) {\r\n\t\tstr = str.replace( /^\\s+|\\s+$/g, '' );\r\n\t}\r\n\r\n\tif ( ! config || config.stripNewlines ) {\r\n\t\tstr = str.replace( /\\n/g, ' ' );\r\n\t}\r\n\r\n\tif ( ! config || config.decodeEntities ) {\r\n\t\t_exportTextarea.innerHTML = str;\r\n\t\tstr = _exportTextarea.value;\r\n\t}\r\n\r\n\treturn str;\r\n};\r\n\r\n\r\n/**\r\n * Buttons defaults. For full documentation, please refer to the docs/option\r\n * directory or the DataTables site.\r\n * @type {Object}\r\n * @static\r\n */\r\nButtons.defaults = {\r\n\tbuttons: [ 'copy', 'excel', 'csv', 'pdf', 'print' ],\r\n\tname: 'main',\r\n\ttabIndex: 0,\r\n\tdom: {\r\n\t\tcontainer: {\r\n\t\t\ttag: 'div',\r\n\t\t\tclassName: 'dt-buttons'\r\n\t\t},\r\n\t\tcollection: {\r\n\t\t\ttag: 'div',\r\n\t\t\tclassName: ''\r\n\t\t},\r\n\t\tbutton: {\r\n\t\t\ttag: 'button',\r\n\t\t\tclassName: 'dt-button',\r\n\t\t\tactive: 'active',\r\n\t\t\tdisabled: 'disabled',\r\n\t\t\tspacerClass: ''\r\n\t\t},\r\n\t\tbuttonLiner: {\r\n\t\t\ttag: 'span',\r\n\t\t\tclassName: ''\r\n\t\t},\r\n\t\tsplit: {\r\n\t\t\ttag: 'div',\r\n\t\t\tclassName: 'dt-button-split',\r\n\t\t},\r\n\t\tsplitWrapper: {\r\n\t\t\ttag: 'div',\r\n\t\t\tclassName: 'dt-btn-split-wrapper',\r\n\t\t},\r\n\t\tsplitDropdown: {\r\n\t\t\ttag: 'button',\r\n\t\t\ttext: '&#x25BC;',\r\n\t\t\tclassName: 'dt-btn-split-drop',\r\n\t\t\talign: 'split-right',\r\n\t\t\tsplitAlignClass: 'dt-button-split-left'\r\n\t\t},\r\n\t\tsplitDropdownButton: {\r\n\t\t\ttag: 'button',\r\n\t\t\tclassName: 'dt-btn-split-drop-button dt-button',\r\n\t\t},\r\n\t\tsplitCollection: {\r\n\t\t\ttag: 'div',\r\n\t\t\tclassName: 'dt-button-split-collection',\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Version information\r\n * @type {string}\r\n * @static\r\n */\r\nButtons.version = '2.3.6';\r\n\r\n\r\n$.extend( _dtButtons, {\r\n\tcollection: {\r\n\t\ttext: function ( dt ) {\r\n\t\t\treturn dt.i18n( 'buttons.collection', 'Collection' );\r\n\t\t},\r\n\t\tclassName: 'buttons-collection',\r\n\t\tcloseButton: false,\r\n\t\tinit: function ( dt, button, config ) {\r\n\t\t\tbutton.attr( 'aria-expanded', false );\r\n\t\t},\r\n\t\taction: function ( e, dt, button, config ) {\r\n\t\t\tif ( config._collection.parents('body').length ) {\r\n\t\t\t\tthis.popover(false, config);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.popover(config._collection, config);\r\n\t\t\t}\r\n\r\n\t\t\t// When activated using a key - auto focus on the\r\n\t\t\t// first item in the popover\r\n\t\t\tif (e.type === 'keypress') {\r\n\t\t\t\t$('a, button', config._collection).eq(0).focus();\r\n\t\t\t}\r\n\t\t},\r\n\t\tattr: {\r\n\t\t\t'aria-haspopup': 'dialog'\r\n\t\t}\r\n\t\t// Also the popover options, defined in Buttons.popover\r\n\t},\r\n\tsplit: {\r\n\t\ttext: function ( dt ) {\r\n\t\t\treturn dt.i18n( 'buttons.split', 'Split' );\r\n\t\t},\r\n\t\tclassName: 'buttons-split',\r\n\t\tcloseButton: false,\r\n\t\tinit: function ( dt, button, config ) {\r\n\t\t\treturn button.attr( 'aria-expanded', false );\r\n\t\t},\r\n\t\taction: function ( e, dt, button, config ) {\r\n\t\t\tthis.popover(config._collection, config);\r\n\t\t},\r\n\t\tattr: {\r\n\t\t\t'aria-haspopup': 'dialog'\r\n\t\t}\r\n\t\t// Also the popover options, defined in Buttons.popover\r\n\t},\r\n\tcopy: function ( dt, conf ) {\r\n\t\tif ( _dtButtons.copyHtml5 ) {\r\n\t\t\treturn 'copyHtml5';\r\n\t\t}\r\n\t},\r\n\tcsv: function ( dt, conf ) {\r\n\t\tif ( _dtButtons.csvHtml5 && _dtButtons.csvHtml5.available( dt, conf ) ) {\r\n\t\t\treturn 'csvHtml5';\r\n\t\t}\r\n\t},\r\n\texcel: function ( dt, conf ) {\r\n\t\tif ( _dtButtons.excelHtml5 && _dtButtons.excelHtml5.available( dt, conf ) ) {\r\n\t\t\treturn 'excelHtml5';\r\n\t\t}\r\n\t},\r\n\tpdf: function ( dt, conf ) {\r\n\t\tif ( _dtButtons.pdfHtml5 && _dtButtons.pdfHtml5.available( dt, conf ) ) {\r\n\t\t\treturn 'pdfHtml5';\r\n\t\t}\r\n\t},\r\n\tpageLength: function ( dt ) {\r\n\t\tvar lengthMenu = dt.settings()[0].aLengthMenu;\r\n\t\tvar vals = [];\r\n\t\tvar lang = [];\r\n\t\tvar text = function ( dt ) {\r\n\t\t\treturn dt.i18n( 'buttons.pageLength', {\r\n\t\t\t\t\"-1\": 'Show all rows',\r\n\t\t\t\t_:    'Show %d rows'\r\n\t\t\t}, dt.page.len() );\r\n\t\t};\r\n\r\n\t\t// Support for DataTables 1.x 2D array\r\n\t\tif (Array.isArray( lengthMenu[0] )) {\r\n\t\t\tvals = lengthMenu[0];\r\n\t\t\tlang = lengthMenu[1];\r\n\t\t}\r\n\t\telse {\r\n\t\t\tfor (var i=0 ; i<lengthMenu.length ; i++) {\r\n\t\t\t\tvar option = lengthMenu[i];\r\n\r\n\t\t\t\t// Support for DataTables 2 object in the array\r\n\t\t\t\tif ($.isPlainObject(option)) {\r\n\t\t\t\t\tvals.push(option.value);\r\n\t\t\t\t\tlang.push(option.label);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tvals.push(option);\r\n\t\t\t\t\tlang.push(option);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\textend: 'collection',\r\n\t\t\ttext: text,\r\n\t\t\tclassName: 'buttons-page-length',\r\n\t\t\tautoClose: true,\r\n\t\t\tbuttons: $.map( vals, function ( val, i ) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttext: lang[i],\r\n\t\t\t\t\tclassName: 'button-page-length',\r\n\t\t\t\t\taction: function ( e, dt ) {\r\n\t\t\t\t\t\tdt.page.len( val ).draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tinit: function ( dt, node, conf ) {\r\n\t\t\t\t\t\tvar that = this;\r\n\t\t\t\t\t\tvar fn = function () {\r\n\t\t\t\t\t\t\tthat.active( dt.page.len() === val );\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tdt.on( 'length.dt'+conf.namespace, fn );\r\n\t\t\t\t\t\tfn();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdestroy: function ( dt, node, conf ) {\r\n\t\t\t\t\t\tdt.off( 'length.dt'+conf.namespace );\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t} ),\r\n\t\t\tinit: function ( dt, node, conf ) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tdt.on( 'length.dt'+conf.namespace, function () {\r\n\t\t\t\t\tthat.text( conf.text );\r\n\t\t\t\t} );\r\n\t\t\t},\r\n\t\t\tdestroy: function ( dt, node, conf ) {\r\n\t\t\t\tdt.off( 'length.dt'+conf.namespace );\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tspacer: {\r\n\t\tstyle: 'empty',\r\n\t\tspacer: true,\r\n\t\ttext: function ( dt ) {\r\n\t\t\treturn dt.i18n( 'buttons.spacer', '' );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n\r\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\r\n * DataTables API\r\n *\r\n * For complete documentation, please refer to the docs/api directory or the\r\n * DataTables site\r\n */\r\n\r\n// Buttons group and individual button selector\r\nDataTable.Api.register( 'buttons()', function ( group, selector ) {\r\n\t// Argument shifting\r\n\tif ( selector === undefined ) {\r\n\t\tselector = group;\r\n\t\tgroup = undefined;\r\n\t}\r\n\r\n\tthis.selector.buttonGroup = group;\r\n\r\n\tvar res = this.iterator( true, 'table', function ( ctx ) {\r\n\t\tif ( ctx._buttons ) {\r\n\t\t\treturn Buttons.buttonSelector(\r\n\t\t\t\tButtons.instanceSelector( group, ctx._buttons ),\r\n\t\t\t\tselector\r\n\t\t\t);\r\n\t\t}\r\n\t}, true );\r\n\r\n\tres._groupSelector = group;\r\n\treturn res;\r\n} );\r\n\r\n// Individual button selector\r\nDataTable.Api.register( 'button()', function ( group, selector ) {\r\n\t// just run buttons() and truncate\r\n\tvar buttons = this.buttons( group, selector );\r\n\r\n\tif ( buttons.length > 1 ) {\r\n\t\tbuttons.splice( 1, buttons.length );\r\n\t}\r\n\r\n\treturn buttons;\r\n} );\r\n\r\n// Active buttons\r\nDataTable.Api.registerPlural( 'buttons().active()', 'button().active()', function ( flag ) {\r\n\tif ( flag === undefined ) {\r\n\t\treturn this.map( function ( set ) {\r\n\t\t\treturn set.inst.active( set.node );\r\n\t\t} );\r\n\t}\r\n\r\n\treturn this.each( function ( set ) {\r\n\t\tset.inst.active( set.node, flag );\r\n\t} );\r\n} );\r\n\r\n// Get / set button action\r\nDataTable.Api.registerPlural( 'buttons().action()', 'button().action()', function ( action ) {\r\n\tif ( action === undefined ) {\r\n\t\treturn this.map( function ( set ) {\r\n\t\t\treturn set.inst.action( set.node );\r\n\t\t} );\r\n\t}\r\n\r\n\treturn this.each( function ( set ) {\r\n\t\tset.inst.action( set.node, action );\r\n\t} );\r\n} );\r\n\r\n// Collection control\r\nDataTable.Api.registerPlural( 'buttons().collectionRebuild()', 'button().collectionRebuild()', function ( buttons ) {\r\n\treturn this.each( function ( set ) {\r\n\t\tfor(var i = 0; i < buttons.length; i++) {\r\n\t\t\tif(typeof buttons[i] === 'object') {\r\n\t\t\t\tbuttons[i].parentConf = set;\r\n\t\t\t}\r\n\t\t}\r\n\t\tset.inst.collectionRebuild( set.node, buttons );\r\n\t} );\r\n} );\r\n\r\n// Enable / disable buttons\r\nDataTable.Api.register( ['buttons().enable()', 'button().enable()'], function ( flag ) {\r\n\treturn this.each( function ( set ) {\r\n\t\tset.inst.enable( set.node, flag );\r\n\t} );\r\n} );\r\n\r\n// Disable buttons\r\nDataTable.Api.register( ['buttons().disable()', 'button().disable()'], function () {\r\n\treturn this.each( function ( set ) {\r\n\t\tset.inst.disable( set.node );\r\n\t} );\r\n} );\r\n\r\n// Button index\r\nDataTable.Api.register( 'button().index()', function () {\r\n\tvar idx = null;\r\n\r\n\tthis.each( function ( set ) {\r\n\t\tvar res = set.inst.index( set.node );\r\n\r\n\t\tif (res !== null) {\r\n\t\t\tidx = res;\r\n\t\t}\r\n\t} );\r\n\r\n\treturn idx;\r\n} );\r\n\r\n// Get button nodes\r\nDataTable.Api.registerPlural( 'buttons().nodes()', 'button().node()', function () {\r\n\tvar jq = $();\r\n\r\n\t// jQuery will automatically reduce duplicates to a single entry\r\n\t$( this.each( function ( set ) {\r\n\t\tjq = jq.add( set.inst.node( set.node ) );\r\n\t} ) );\r\n\r\n\treturn jq;\r\n} );\r\n\r\n// Get / set button processing state\r\nDataTable.Api.registerPlural( 'buttons().processing()', 'button().processing()', function ( flag ) {\r\n\tif ( flag === undefined ) {\r\n\t\treturn this.map( function ( set ) {\r\n\t\t\treturn set.inst.processing( set.node );\r\n\t\t} );\r\n\t}\r\n\r\n\treturn this.each( function ( set ) {\r\n\t\tset.inst.processing( set.node, flag );\r\n\t} );\r\n} );\r\n\r\n// Get / set button text (i.e. the button labels)\r\nDataTable.Api.registerPlural( 'buttons().text()', 'button().text()', function ( label ) {\r\n\tif ( label === undefined ) {\r\n\t\treturn this.map( function ( set ) {\r\n\t\t\treturn set.inst.text( set.node );\r\n\t\t} );\r\n\t}\r\n\r\n\treturn this.each( function ( set ) {\r\n\t\tset.inst.text( set.node, label );\r\n\t} );\r\n} );\r\n\r\n// Trigger a button's action\r\nDataTable.Api.registerPlural( 'buttons().trigger()', 'button().trigger()', function () {\r\n\treturn this.each( function ( set ) {\r\n\t\tset.inst.node( set.node ).trigger( 'click' );\r\n\t} );\r\n} );\r\n\r\n// Button resolver to the popover\r\nDataTable.Api.register( 'button().popover()', function (content, options) {\r\n\treturn this.map( function ( set ) {\r\n\t\treturn set.inst._popover( content, this.button(this[0].node), options );\r\n\t} );\r\n} );\r\n\r\n// Get the container elements\r\nDataTable.Api.register( 'buttons().containers()', function () {\r\n\tvar jq = $();\r\n\tvar groupSelector = this._groupSelector;\r\n\r\n\t// We need to use the group selector directly, since if there are no buttons\r\n\t// the result set will be empty\r\n\tthis.iterator( true, 'table', function ( ctx ) {\r\n\t\tif ( ctx._buttons ) {\r\n\t\t\tvar insts = Buttons.instanceSelector( groupSelector, ctx._buttons );\r\n\r\n\t\t\tfor ( var i=0, ien=insts.length ; i<ien ; i++ ) {\r\n\t\t\t\tjq = jq.add( insts[i].container() );\r\n\t\t\t}\r\n\t\t}\r\n\t} );\r\n\r\n\treturn jq;\r\n} );\r\n\r\nDataTable.Api.register( 'buttons().container()', function () {\r\n\t// API level of nesting is `buttons()` so we can zip into the containers method\r\n\treturn this.containers().eq(0);\r\n} );\r\n\r\n// Add a new button\r\nDataTable.Api.register( 'button().add()', function ( idx, conf, draw ) {\r\n\tvar ctx = this.context;\r\n\r\n\t// Don't use `this` as it could be empty - select the instances directly\r\n\tif ( ctx.length ) {\r\n\t\tvar inst = Buttons.instanceSelector( this._groupSelector, ctx[0]._buttons );\r\n\r\n\t\tif ( inst.length ) {\r\n\t\t\tinst[0].add( conf, idx , draw);\r\n\t\t}\r\n\t}\r\n\r\n\treturn this.button( this._groupSelector, idx );\r\n} );\r\n\r\n// Destroy the button sets selected\r\nDataTable.Api.register( 'buttons().destroy()', function () {\r\n\tthis.pluck( 'inst' ).unique().each( function ( inst ) {\r\n\t\tinst.destroy();\r\n\t} );\r\n\r\n\treturn this;\r\n} );\r\n\r\n// Remove a button\r\nDataTable.Api.registerPlural( 'buttons().remove()', 'buttons().remove()', function () {\r\n\tthis.each( function ( set ) {\r\n\t\tset.inst.remove( set.node );\r\n\t} );\r\n\r\n\treturn this;\r\n} );\r\n\r\n// Information box that can be used by buttons\r\nvar _infoTimer;\r\nDataTable.Api.register( 'buttons.info()', function ( title, message, time ) {\r\n\tvar that = this;\r\n\r\n\tif ( title === false ) {\r\n\t\tthis.off('destroy.btn-info');\r\n\t\t_fadeOut(\r\n\t\t\t$('#datatables_buttons_info'),\r\n\t\t\t400,\r\n\t\t\tfunction () {\r\n\t\t\t\t$(this).remove();\r\n\t\t\t}\r\n\t\t);\r\n\t\tclearTimeout( _infoTimer );\r\n\t\t_infoTimer = null;\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tif ( _infoTimer ) {\r\n\t\tclearTimeout( _infoTimer );\r\n\t}\r\n\r\n\tif ( $('#datatables_buttons_info').length ) {\r\n\t\t$('#datatables_buttons_info').remove();\r\n\t}\r\n\r\n\ttitle = title ? '<h2>'+title+'</h2>' : '';\r\n\r\n\t_fadeIn(\r\n\t\t$('<div id=\"datatables_buttons_info\" class=\"dt-button-info\"/>')\r\n\t\t\t.html( title )\r\n\t\t\t.append( $('<div/>')[ typeof message === 'string' ? 'html' : 'append' ]( message ) )\r\n\t\t\t.css( 'display', 'none' )\r\n\t\t\t.appendTo( 'body' )\r\n\t);\r\n\r\n\tif ( time !== undefined && time !== 0 ) {\r\n\t\t_infoTimer = setTimeout( function () {\r\n\t\t\tthat.buttons.info( false );\r\n\t\t}, time );\r\n\t}\r\n\r\n\tthis.on('destroy.btn-info', function () {\r\n\t\tthat.buttons.info(false);\r\n\t});\r\n\r\n\treturn this;\r\n} );\r\n\r\n// Get data from the table for export - this is common to a number of plug-in\r\n// buttons so it is included in the Buttons core library\r\nDataTable.Api.register( 'buttons.exportData()', function ( options ) {\r\n\tif ( this.context.length ) {\r\n\t\treturn _exportData( new DataTable.Api( this.context[0] ), options );\r\n\t}\r\n} );\r\n\r\n// Get information about the export that is common to many of the export data\r\n// types (DRY)\r\nDataTable.Api.register( 'buttons.exportInfo()', function ( conf ) {\r\n\tif ( ! conf ) {\r\n\t\tconf = {};\r\n\t}\r\n\r\n\treturn {\r\n\t\tfilename: _filename( conf ),\r\n\t\ttitle: _title( conf ),\r\n\t\tmessageTop: _message(this, conf.message || conf.messageTop, 'top'),\r\n\t\tmessageBottom: _message(this, conf.messageBottom, 'bottom')\r\n\t};\r\n} );\r\n\r\n\r\n\r\n/**\r\n * Get the file name for an exported file.\r\n *\r\n * @param {object}\tconfig Button configuration\r\n * @param {boolean} incExtension Include the file name extension\r\n */\r\nvar _filename = function ( config )\r\n{\r\n\t// Backwards compatibility\r\n\tvar filename = config.filename === '*' && config.title !== '*' && config.title !== undefined && config.title !== null && config.title !== '' ?\r\n\t\tconfig.title :\r\n\t\tconfig.filename;\r\n\r\n\tif ( typeof filename === 'function' ) {\r\n\t\tfilename = filename();\r\n\t}\r\n\r\n\tif ( filename === undefined || filename === null ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif ( filename.indexOf( '*' ) !== -1 ) {\r\n\t\tfilename = filename.replace( '*', $('head > title').text() ).trim();\r\n\t}\r\n\r\n\t// Strip characters which the OS will object to\r\n\tfilename = filename.replace(/[^a-zA-Z0-9_\\u00A1-\\uFFFF\\.,\\-_ !\\(\\)]/g, \"\");\r\n\r\n\tvar extension = _stringOrFunction( config.extension );\r\n\tif ( ! extension ) {\r\n\t\textension = '';\r\n\t}\r\n\r\n\treturn filename + extension;\r\n};\r\n\r\n/**\r\n * Simply utility method to allow parameters to be given as a function\r\n *\r\n * @param {undefined|string|function} option Option\r\n * @return {null|string} Resolved value\r\n */\r\nvar _stringOrFunction = function ( option )\r\n{\r\n\tif ( option === null || option === undefined ) {\r\n\t\treturn null;\r\n\t}\r\n\telse if ( typeof option === 'function' ) {\r\n\t\treturn option();\r\n\t}\r\n\treturn option;\r\n};\r\n\r\n/**\r\n * Get the title for an exported file.\r\n *\r\n * @param {object} config\tButton configuration\r\n */\r\nvar _title = function ( config )\r\n{\r\n\tvar title = _stringOrFunction( config.title );\r\n\r\n\treturn title === null ?\r\n\t\tnull : title.indexOf( '*' ) !== -1 ?\r\n\t\t\ttitle.replace( '*', $('head > title').text() || 'Exported data' ) :\r\n\t\t\ttitle;\r\n};\r\n\r\nvar _message = function ( dt, option, position )\r\n{\r\n\tvar message = _stringOrFunction( option );\r\n\tif ( message === null ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tvar caption = $('caption', dt.table().container()).eq(0);\r\n\tif ( message === '*' ) {\r\n\t\tvar side = caption.css( 'caption-side' );\r\n\t\tif ( side !== position ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn caption.length ?\r\n\t\t\tcaption.text() :\r\n\t\t\t'';\r\n\t}\r\n\r\n\treturn message;\r\n};\r\n\r\n\r\n\r\n\r\nvar _exportTextarea = $('<textarea/>')[0];\r\nvar _exportData = function ( dt, inOpts )\r\n{\r\n\tvar config = $.extend( true, {}, {\r\n\t\trows:           null,\r\n\t\tcolumns:        '',\r\n\t\tmodifier:       {\r\n\t\t\tsearch: 'applied',\r\n\t\t\torder:  'applied'\r\n\t\t},\r\n\t\torthogonal:     'display',\r\n\t\tstripHtml:      true,\r\n\t\tstripNewlines:  true,\r\n\t\tdecodeEntities: true,\r\n\t\ttrim:           true,\r\n\t\tformat:         {\r\n\t\t\theader: function ( d ) {\r\n\t\t\t\treturn Buttons.stripData( d, config );\r\n\t\t\t},\r\n\t\t\tfooter: function ( d ) {\r\n\t\t\t\treturn Buttons.stripData( d, config );\r\n\t\t\t},\r\n\t\t\tbody: function ( d ) {\r\n\t\t\t\treturn Buttons.stripData( d, config );\r\n\t\t\t}\r\n\t\t},\r\n\t\tcustomizeData: null\r\n\t}, inOpts );\r\n\r\n\tvar header = dt.columns( config.columns ).indexes().map( function (idx) {\r\n\t\tvar el = dt.column( idx ).header();\r\n\t\treturn config.format.header( el.innerHTML, idx, el );\r\n\t} ).toArray();\r\n\r\n\tvar footer = dt.table().footer() ?\r\n\t\tdt.columns( config.columns ).indexes().map( function (idx) {\r\n\t\t\tvar el = dt.column( idx ).footer();\r\n\t\t\treturn config.format.footer( el ? el.innerHTML : '', idx, el );\r\n\t\t} ).toArray() :\r\n\t\tnull;\r\n\t\r\n\t// If Select is available on this table, and any rows are selected, limit the export\r\n\t// to the selected rows. If no rows are selected, all rows will be exported. Specify\r\n\t// a `selected` modifier to control directly.\r\n\tvar modifier = $.extend( {}, config.modifier );\r\n\tif ( dt.select && typeof dt.select.info === 'function' && modifier.selected === undefined ) {\r\n\t\tif ( dt.rows( config.rows, $.extend( { selected: true }, modifier ) ).any() ) {\r\n\t\t\t$.extend( modifier, { selected: true } )\r\n\t\t}\r\n\t}\r\n\r\n\tvar rowIndexes = dt.rows( config.rows, modifier ).indexes().toArray();\r\n\tvar selectedCells = dt.cells( rowIndexes, config.columns );\r\n\tvar cells = selectedCells\r\n\t\t.render( config.orthogonal )\r\n\t\t.toArray();\r\n\tvar cellNodes = selectedCells\r\n\t\t.nodes()\r\n\t\t.toArray();\r\n\r\n\tvar columns = header.length;\r\n\tvar rows = columns > 0 ? cells.length / columns : 0;\r\n\tvar body = [];\r\n\tvar cellCounter = 0;\r\n\r\n\tfor ( var i=0, ien=rows ; i<ien ; i++ ) {\r\n\t\tvar row = [ columns ];\r\n\r\n\t\tfor ( var j=0 ; j<columns ; j++ ) {\r\n\t\t\trow[j] = config.format.body( cells[ cellCounter ], i, j, cellNodes[ cellCounter ] );\r\n\t\t\tcellCounter++;\r\n\t\t}\r\n\r\n\t\tbody[i] = row;\r\n\t}\r\n\r\n\tvar data = {\r\n\t\theader: header,\r\n\t\tfooter: footer,\r\n\t\tbody:   body\r\n\t};\r\n\r\n\tif ( config.customizeData ) {\r\n\t\tconfig.customizeData( data );\r\n\t}\r\n\r\n\treturn data;\r\n};\r\n\r\n\r\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\r\n * DataTables interface\r\n */\r\n\r\n// Attach to DataTables objects for global access\r\n$.fn.dataTable.Buttons = Buttons;\r\n$.fn.DataTable.Buttons = Buttons;\r\n\r\n\r\n\r\n// DataTables creation - check if the buttons have been defined for this table,\r\n// they will have been if the `B` option was used in `dom`, otherwise we should\r\n// create the buttons instance here so they can be inserted into the document\r\n// using the API. Listen for `init` for compatibility with pre 1.10.10, but to\r\n// be removed in future.\r\n$(document).on( 'init.dt plugin-init.dt', function (e, settings) {\r\n\tif ( e.namespace !== 'dt' ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar opts = settings.oInit.buttons || DataTable.defaults.buttons;\r\n\r\n\tif ( opts && ! settings._buttons ) {\r\n\t\tnew Buttons( settings, opts ).container();\r\n\t}\r\n} );\r\n\r\nfunction _init ( settings, options ) {\r\n\tvar api = new DataTable.Api( settings );\r\n\tvar opts = options\r\n\t\t? options\r\n\t\t: api.init().buttons || DataTable.defaults.buttons;\r\n\r\n\treturn new Buttons( api, opts ).container();\r\n}\r\n\r\n// DataTables `dom` feature option\r\nDataTable.ext.feature.push( {\r\n\tfnInit: _init,\r\n\tcFeature: \"B\"\r\n} );\r\n\r\n// DataTables 2 layout feature\r\nif ( DataTable.ext.features ) {\r\n\tDataTable.ext.features.register( 'buttons', _init );\r\n}\r\n\r\n\r\nexport default DataTable;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}